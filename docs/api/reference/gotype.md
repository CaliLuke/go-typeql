<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# gotype

```go
import "github.com/CaliLuke/go-typeql/gotype"
```

Package gotype provides high\-level TypeDB data mapping and CRUD operations.

Package gotype provides reflection\-based TypeDB data mapping.

Package gotype defines various error types for ORM operations and schema management.

Package gotype provides utilities for formatting Go values into TypeQL syntax.

Package gotype provides mechanisms for hydrating Go structs from TypeDB results.

Package gotype provides automated schema migration capabilities.

Package gotype defines discrete migration operations.

Package gotype handles the persistence and tracking of schema migrations.

Package gotype provides reflection\-based mapping between Go types and TypeDB models.

Package gotype provides a fluent query builder for TypeDB.

Package gotype provides a central registry for TypeDB model metadata.

Package gotype provides reflection\-based TypeDB data mapping.

Package gotype provides utilities for generating TypeQL schema definitions from Go models.

Package gotype provides a high\-level, struct\-tag based ORM layer for TypeDB. It maps Go structs to TypeDB entities and relations, providing generic CRUD operations and automatic query generation.

Package gotype defines query generation strategies for different TypeDB model kinds.

Package gotype provides parsing and representation of 'typedb' struct tags.

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [func ClearRegistry\(\)](<#ClearRegistry>)
- [func EnsureDatabase\(ctx context.Context, conn Conn, name string\) \(bool, error\)](<#EnsureDatabase>)
- [func FormatValue\(value any\) string](<#FormatValue>)
- [func FromDict\[T any\]\(data map\[string\]any\) \(\*T, error\)](<#FromDict>)
- [func GenerateSchema\(\) string](<#GenerateSchema>)
- [func GenerateSchemaFor\(info \*ModelInfo\) string](<#GenerateSchemaFor>)
- [func HashStatements\(stmts \[\]string\) string](<#HashStatements>)
- [func Hydrate\(target any, data map\[string\]any\) error](<#Hydrate>)
- [func HydrateAny\(data map\[string\]any\) \(any, error\)](<#HydrateAny>)
- [func HydrateNew\[T any\]\(data map\[string\]any\) \(\*T, error\)](<#HydrateNew>)
- [func IntrospectSchemaFromString\(schemaStr string\) \(\*tqlgen.ParsedSchema, error\)](<#IntrospectSchemaFromString>)
- [func IsReservedWord\(name string\) bool](<#IsReservedWord>)
- [func MigrateFromEmpty\(ctx context.Context, db \*Database\) error](<#MigrateFromEmpty>)
- [func MustRegister\[T any\]\(\)](<#MustRegister>)
- [func Register\[T any\]\(\) error](<#Register>)
- [func ToDict\[T any\]\(instance \*T\) \(map\[string\]any, error\)](<#ToDict>)
- [func ToInsertQuery\[T any\]\(instance \*T\) \(string, error\)](<#ToInsertQuery>)
- [func ToMatchQuery\[T any\]\(instance \*T\) \(string, error\)](<#ToMatchQuery>)
- [type AddAttribute](<#AddAttribute>)
  - [func \(op AddAttribute\) IsDestructive\(\) bool](<#AddAttribute.IsDestructive>)
  - [func \(op AddAttribute\) IsReversible\(\) bool](<#AddAttribute.IsReversible>)
  - [func \(op AddAttribute\) RollbackTypeQL\(\) string](<#AddAttribute.RollbackTypeQL>)
  - [func \(op AddAttribute\) ToTypeQL\(\) string](<#AddAttribute.ToTypeQL>)
- [type AddEntity](<#AddEntity>)
  - [func \(op AddEntity\) IsDestructive\(\) bool](<#AddEntity.IsDestructive>)
  - [func \(op AddEntity\) IsReversible\(\) bool](<#AddEntity.IsReversible>)
  - [func \(op AddEntity\) RollbackTypeQL\(\) string](<#AddEntity.RollbackTypeQL>)
  - [func \(op AddEntity\) ToTypeQL\(\) string](<#AddEntity.ToTypeQL>)
- [type AddOwnership](<#AddOwnership>)
  - [func \(op AddOwnership\) IsDestructive\(\) bool](<#AddOwnership.IsDestructive>)
  - [func \(op AddOwnership\) IsReversible\(\) bool](<#AddOwnership.IsReversible>)
  - [func \(op AddOwnership\) RollbackTypeQL\(\) string](<#AddOwnership.RollbackTypeQL>)
  - [func \(op AddOwnership\) ToTypeQL\(\) string](<#AddOwnership.ToTypeQL>)
- [type AddRelation](<#AddRelation>)
  - [func \(op AddRelation\) IsDestructive\(\) bool](<#AddRelation.IsDestructive>)
  - [func \(op AddRelation\) IsReversible\(\) bool](<#AddRelation.IsReversible>)
  - [func \(op AddRelation\) RollbackTypeQL\(\) string](<#AddRelation.RollbackTypeQL>)
  - [func \(op AddRelation\) ToTypeQL\(\) string](<#AddRelation.ToTypeQL>)
- [type AddRole](<#AddRole>)
  - [func \(op AddRole\) IsDestructive\(\) bool](<#AddRole.IsDestructive>)
  - [func \(op AddRole\) IsReversible\(\) bool](<#AddRole.IsReversible>)
  - [func \(op AddRole\) RollbackTypeQL\(\) string](<#AddRole.RollbackTypeQL>)
  - [func \(op AddRole\) ToTypeQL\(\) string](<#AddRole.ToTypeQL>)
- [type AggregateQuery](<#AggregateQuery>)
  - [func \(aq \*AggregateQuery\[T\]\) Execute\(ctx context.Context\) \(float64, error\)](<#AggregateQuery[T].Execute>)
- [type AggregateSpec](<#AggregateSpec>)
- [type AndFilter](<#AndFilter>)
  - [func \(f \*AndFilter\) ToPatterns\(varName string\) \[\]string](<#AndFilter.ToPatterns>)
- [type AttrChange](<#AttrChange>)
- [type BaseEntity](<#BaseEntity>)
  - [func \(e \*BaseEntity\) GetIID\(\) string](<#BaseEntity.GetIID>)
  - [func \(e \*BaseEntity\) SetIID\(iid string\)](<#BaseEntity.SetIID>)
  - [func \(BaseEntity\) TypeDBTypeName\(\) string](<#BaseEntity.TypeDBTypeName>)
- [type BaseRelation](<#BaseRelation>)
  - [func \(r \*BaseRelation\) GetIID\(\) string](<#BaseRelation.GetIID>)
  - [func \(r \*BaseRelation\) SetIID\(iid string\)](<#BaseRelation.SetIID>)
  - [func \(BaseRelation\) TypeDBTypeName\(\) string](<#BaseRelation.TypeDBTypeName>)
- [type BreakingChange](<#BreakingChange>)
- [type ComparisonFilter](<#ComparisonFilter>)
  - [func \(f \*ComparisonFilter\) ToPatterns\(varName string\) \[\]string](<#ComparisonFilter.ToPatterns>)
- [type Conn](<#Conn>)
- [type ConnPool](<#ConnPool>)
  - [func NewConnPool\(config PoolConfig, factory func\(\) \(Conn, error\)\) \(\*ConnPool, error\)](<#NewConnPool>)
  - [func \(p \*ConnPool\) Close\(\)](<#ConnPool.Close>)
  - [func \(p \*ConnPool\) Get\(ctx context.Context\) \(Conn, error\)](<#ConnPool.Get>)
  - [func \(p \*ConnPool\) Put\(conn Conn\)](<#ConnPool.Put>)
  - [func \(p \*ConnPool\) Stats\(\) PoolStats](<#ConnPool.Stats>)
- [type Database](<#Database>)
  - [func NewDatabase\(conn Conn, dbName string\) \*Database](<#NewDatabase>)
  - [func NewDatabaseWithPool\(config PoolConfig, dbName string, factory func\(\) \(Conn, error\)\) \(\*Database, error\)](<#NewDatabaseWithPool>)
  - [func \(db \*Database\) Begin\(txType TransactionType\) \(\*TransactionContext, error\)](<#Database.Begin>)
  - [func \(db \*Database\) Close\(\)](<#Database.Close>)
  - [func \(db \*Database\) ExecuteRead\(ctx context.Context, query string\) \(\[\]map\[string\]any, error\)](<#Database.ExecuteRead>)
  - [func \(db \*Database\) ExecuteSchema\(ctx context.Context, query string\) error](<#Database.ExecuteSchema>)
  - [func \(db \*Database\) ExecuteWrite\(ctx context.Context, query string\) \(\[\]map\[string\]any, error\)](<#Database.ExecuteWrite>)
  - [func \(db \*Database\) GetConn\(\) Conn](<#Database.GetConn>)
  - [func \(db \*Database\) Name\(\) string](<#Database.Name>)
  - [func \(db \*Database\) Schema\(ctx context.Context\) \(string, error\)](<#Database.Schema>)
  - [func \(db \*Database\) Transaction\(txType TransactionType\) \(Tx, error\)](<#Database.Transaction>)
- [type DeleteOption](<#DeleteOption>)
  - [func WithStrict\(\) DeleteOption](<#WithStrict>)
- [type Entity](<#Entity>)
- [type ExistsFilter](<#ExistsFilter>)
  - [func \(f \*ExistsFilter\) ToPatterns\(varName string\) \[\]string](<#ExistsFilter.ToPatterns>)
- [type FieldInfo](<#FieldInfo>)
- [type FieldTag](<#FieldTag>)
  - [func ParseTag\(tag string\) \(FieldTag, error\)](<#ParseTag>)
  - [func \(ft FieldTag\) IsRole\(\) bool](<#FieldTag.IsRole>)
- [type Filter](<#Filter>)
  - [func And\(filters ...Filter\) Filter](<#And>)
  - [func ByIID\(iid string\) Filter](<#ByIID>)
  - [func Contains\(attr string, pattern string\) Filter](<#Contains>)
  - [func Eq\(attr string, value any\) Filter](<#Eq>)
  - [func Gt\(attr string, value any\) Filter](<#Gt>)
  - [func Gte\(attr string, value any\) Filter](<#Gte>)
  - [func HasAttr\(attr string\) Filter](<#HasAttr>)
  - [func In\(attr string, values \[\]any\) Filter](<#In>)
  - [func Like\(attr string, pattern string\) Filter](<#Like>)
  - [func Lt\(attr string, value any\) Filter](<#Lt>)
  - [func Lte\(attr string, value any\) Filter](<#Lte>)
  - [func Neq\(attr string, value any\) Filter](<#Neq>)
  - [func Not\(filter Filter\) Filter](<#Not>)
  - [func NotHasAttr\(attr string\) Filter](<#NotHasAttr>)
  - [func NotIn\(attr string, values \[\]any\) Filter](<#NotIn>)
  - [func Or\(filters ...Filter\) Filter](<#Or>)
  - [func Range\(attr string, min, max any\) Filter](<#Range>)
  - [func Regex\(attr string, pattern string\) Filter](<#Regex>)
  - [func RolePlayer\(roleName string, inner Filter\) Filter](<#RolePlayer>)
  - [func Startswith\(attr string, prefix string\) Filter](<#Startswith>)
- [type GroupByQuery](<#GroupByQuery>)
  - [func \(gq \*GroupByQuery\[T\]\) Aggregate\(ctx context.Context, specs ...AggregateSpec\) \(map\[string\]map\[string\]float64, error\)](<#GroupByQuery[T].Aggregate>)
- [type HydrationError](<#HydrationError>)
  - [func \(e \*HydrationError\) Error\(\) string](<#HydrationError.Error>)
  - [func \(e \*HydrationError\) Unwrap\(\) error](<#HydrationError.Unwrap>)
- [type IIDFilter](<#IIDFilter>)
  - [func \(f \*IIDFilter\) ToPatterns\(varName string\) \[\]string](<#IIDFilter.ToPatterns>)
- [type InFilter](<#InFilter>)
  - [func \(f \*InFilter\) ToPatterns\(varName string\) \[\]string](<#InFilter.ToPatterns>)
- [type KeyAttributeError](<#KeyAttributeError>)
  - [func \(e \*KeyAttributeError\) Error\(\) string](<#KeyAttributeError.Error>)
- [type Manager](<#Manager>)
  - [func NewManager\[T any\]\(db \*Database\) \*Manager\[T\]](<#NewManager>)
  - [func NewManagerWithTx\[T any\]\(tc \*TransactionContext\) \*Manager\[T\]](<#NewManagerWithTx>)
  - [func \(m \*Manager\[T\]\) All\(ctx context.Context\) \(\[\]\*T, error\)](<#Manager[T].All>)
  - [func \(m \*Manager\[T\]\) Delete\(ctx context.Context, instance \*T, opts ...DeleteOption\) error](<#Manager[T].Delete>)
  - [func \(m \*Manager\[T\]\) DeleteMany\(ctx context.Context, instances \[\]\*T, opts ...DeleteOption\) error](<#Manager[T].DeleteMany>)
  - [func \(m \*Manager\[T\]\) Get\(ctx context.Context, filters map\[string\]any\) \(\[\]\*T, error\)](<#Manager[T].Get>)
  - [func \(m \*Manager\[T\]\) GetByIID\(ctx context.Context, iid string\) \(\*T, error\)](<#Manager[T].GetByIID>)
  - [func \(m \*Manager\[T\]\) GetByIIDPolymorphic\(ctx context.Context, iid string\) \(\*T, string, error\)](<#Manager[T].GetByIIDPolymorphic>)
  - [func \(m \*Manager\[T\]\) GetByIIDPolymorphicAny\(ctx context.Context, iid string\) \(any, string, error\)](<#Manager[T].GetByIIDPolymorphicAny>)
  - [func \(m \*Manager\[T\]\) GetWithRoles\(ctx context.Context, filters map\[string\]any\) \(\[\]\*T, error\)](<#Manager[T].GetWithRoles>)
  - [func \(m \*Manager\[T\]\) Insert\(ctx context.Context, instance \*T\) error](<#Manager[T].Insert>)
  - [func \(m \*Manager\[T\]\) InsertMany\(ctx context.Context, instances \[\]\*T\) error](<#Manager[T].InsertMany>)
  - [func \(m \*Manager\[T\]\) Put\(ctx context.Context, instance \*T\) error](<#Manager[T].Put>)
  - [func \(m \*Manager\[T\]\) PutMany\(ctx context.Context, instances \[\]\*T\) error](<#Manager[T].PutMany>)
  - [func \(m \*Manager\[T\]\) Query\(\) \*Query\[T\]](<#Manager[T].Query>)
  - [func \(m \*Manager\[T\]\) Update\(ctx context.Context, instance \*T\) error](<#Manager[T].Update>)
  - [func \(m \*Manager\[T\]\) UpdateMany\(ctx context.Context, instances \[\]\*T\) error](<#Manager[T].UpdateMany>)
- [type MigrateOption](<#MigrateOption>)
  - [func WithDestructive\(\) MigrateOption](<#WithDestructive>)
- [type MigrationError](<#MigrationError>)
  - [func \(e \*MigrationError\) Error\(\) string](<#MigrationError.Error>)
  - [func \(e \*MigrationError\) Unwrap\(\) error](<#MigrationError.Unwrap>)
- [type MigrationRecord](<#MigrationRecord>)
- [type MigrationState](<#MigrationState>)
  - [func NewMigrationState\(db \*Database\) \*MigrationState](<#NewMigrationState>)
  - [func \(ms \*MigrationState\) Applied\(ctx context.Context\) \(\[\]MigrationRecord, error\)](<#MigrationState.Applied>)
  - [func \(ms \*MigrationState\) EnsureSchema\(ctx context.Context\) error](<#MigrationState.EnsureSchema>)
  - [func \(ms \*MigrationState\) IsApplied\(ctx context.Context, hash string\) \(bool, error\)](<#MigrationState.IsApplied>)
  - [func \(ms \*MigrationState\) Record\(ctx context.Context, hash, summary string\) error](<#MigrationState.Record>)
- [type ModelInfo](<#ModelInfo>)
  - [func ExtractModelInfo\(t reflect.Type\) \(\*ModelInfo, error\)](<#ExtractModelInfo>)
  - [func Lookup\(typeName string\) \(\*ModelInfo, bool\)](<#Lookup>)
  - [func LookupByGoName\(name string\) \(\*ModelInfo, bool\)](<#LookupByGoName>)
  - [func LookupType\(t reflect.Type\) \(\*ModelInfo, bool\)](<#LookupType>)
  - [func RegisteredTypes\(\) \[\]\*ModelInfo](<#RegisteredTypes>)
  - [func ResolveType\(typeLabel string\) \(\*ModelInfo, bool\)](<#ResolveType>)
  - [func SubtypesOf\(typeName string\) \[\]\*ModelInfo](<#SubtypesOf>)
  - [func \(m \*ModelInfo\) FieldByAttrName\(attrName string\) \(FieldInfo, bool\)](<#ModelInfo.FieldByAttrName>)
  - [func \(m \*ModelInfo\) FieldByName\(name string\) \(FieldInfo, bool\)](<#ModelInfo.FieldByName>)
- [type ModelKind](<#ModelKind>)
- [type ModelStrategy](<#ModelStrategy>)
- [type NotFilter](<#NotFilter>)
  - [func \(f \*NotFilter\) ToPatterns\(varName string\) \[\]string](<#NotFilter.ToPatterns>)
- [type NotFoundError](<#NotFoundError>)
  - [func \(e \*NotFoundError\) Error\(\) string](<#NotFoundError.Error>)
- [type NotRegisteredError](<#NotRegisteredError>)
  - [func \(e \*NotRegisteredError\) Error\(\) string](<#NotRegisteredError.Error>)
- [type NotUniqueError](<#NotUniqueError>)
  - [func \(e \*NotUniqueError\) Error\(\) string](<#NotUniqueError.Error>)
- [type Operation](<#Operation>)
- [type OrFilter](<#OrFilter>)
  - [func \(f \*OrFilter\) ToPatterns\(varName string\) \[\]string](<#OrFilter.ToPatterns>)
- [type OrderClause](<#OrderClause>)
- [type OwnsChange](<#OwnsChange>)
- [type PoolConfig](<#PoolConfig>)
  - [func DefaultPoolConfig\(\) PoolConfig](<#DefaultPoolConfig>)
- [type PoolStats](<#PoolStats>)
- [type Query](<#Query>)
  - [func \(q \*Query\[T\]\) Aggregate\(ctx context.Context, specs ...AggregateSpec\) \(map\[string\]float64, error\)](<#Query[T].Aggregate>)
  - [func \(q \*Query\[T\]\) All\(ctx context.Context\) \(\[\]\*T, error\)](<#Query[T].All>)
  - [func \(q \*Query\[T\]\) Avg\(attr string\) \*AggregateQuery\[T\]](<#Query[T].Avg>)
  - [func \(q \*Query\[T\]\) Count\(ctx context.Context\) \(int64, error\)](<#Query[T].Count>)
  - [func \(q \*Query\[T\]\) Delete\(ctx context.Context\) \(int64, error\)](<#Query[T].Delete>)
  - [func \(q \*Query\[T\]\) Execute\(ctx context.Context\) \(\[\]\*T, error\)](<#Query[T].Execute>)
  - [func \(q \*Query\[T\]\) Exists\(ctx context.Context\) \(bool, error\)](<#Query[T].Exists>)
  - [func \(q \*Query\[T\]\) Filter\(filters ...Filter\) \*Query\[T\]](<#Query[T].Filter>)
  - [func \(q \*Query\[T\]\) First\(ctx context.Context\) \(\*T, error\)](<#Query[T].First>)
  - [func \(q \*Query\[T\]\) GroupBy\(attr string\) \*GroupByQuery\[T\]](<#Query[T].GroupBy>)
  - [func \(q \*Query\[T\]\) Limit\(n int\) \*Query\[T\]](<#Query[T].Limit>)
  - [func \(q \*Query\[T\]\) Max\(attr string\) \*AggregateQuery\[T\]](<#Query[T].Max>)
  - [func \(q \*Query\[T\]\) Median\(attr string\) \*AggregateQuery\[T\]](<#Query[T].Median>)
  - [func \(q \*Query\[T\]\) Min\(attr string\) \*AggregateQuery\[T\]](<#Query[T].Min>)
  - [func \(q \*Query\[T\]\) Offset\(n int\) \*Query\[T\]](<#Query[T].Offset>)
  - [func \(q \*Query\[T\]\) OrderAsc\(attr string\) \*Query\[T\]](<#Query[T].OrderAsc>)
  - [func \(q \*Query\[T\]\) OrderDesc\(attr string\) \*Query\[T\]](<#Query[T].OrderDesc>)
  - [func \(q \*Query\[T\]\) Std\(attr string\) \*AggregateQuery\[T\]](<#Query[T].Std>)
  - [func \(q \*Query\[T\]\) Sum\(attr string\) \*AggregateQuery\[T\]](<#Query[T].Sum>)
  - [func \(q \*Query\[T\]\) Update\(ctx context.Context, updates map\[string\]any\) \(int64, error\)](<#Query[T].Update>)
  - [func \(q \*Query\[T\]\) UpdateWith\(ctx context.Context, fn func\(\*T\)\) \(\[\]\*T, error\)](<#Query[T].UpdateWith>)
  - [func \(q \*Query\[T\]\) Variance\(attr string\) \*AggregateQuery\[T\]](<#Query[T].Variance>)
- [type RangeFilter](<#RangeFilter>)
  - [func \(f \*RangeFilter\) ToPatterns\(varName string\) \[\]string](<#RangeFilter.ToPatterns>)
- [type RegexFilter](<#RegexFilter>)
  - [func \(f \*RegexFilter\) ToPatterns\(varName string\) \[\]string](<#RegexFilter.ToPatterns>)
- [type Registry](<#Registry>)
- [type RelatesChange](<#RelatesChange>)
- [type Relation](<#Relation>)
- [type RemoveAttribute](<#RemoveAttribute>)
  - [func \(op RemoveAttribute\) IsDestructive\(\) bool](<#RemoveAttribute.IsDestructive>)
  - [func \(op RemoveAttribute\) IsReversible\(\) bool](<#RemoveAttribute.IsReversible>)
  - [func \(op RemoveAttribute\) RollbackTypeQL\(\) string](<#RemoveAttribute.RollbackTypeQL>)
  - [func \(op RemoveAttribute\) ToTypeQL\(\) string](<#RemoveAttribute.ToTypeQL>)
- [type RemoveEntity](<#RemoveEntity>)
  - [func \(op RemoveEntity\) IsDestructive\(\) bool](<#RemoveEntity.IsDestructive>)
  - [func \(op RemoveEntity\) IsReversible\(\) bool](<#RemoveEntity.IsReversible>)
  - [func \(op RemoveEntity\) RollbackTypeQL\(\) string](<#RemoveEntity.RollbackTypeQL>)
  - [func \(op RemoveEntity\) ToTypeQL\(\) string](<#RemoveEntity.ToTypeQL>)
- [type RemoveOwnership](<#RemoveOwnership>)
  - [func \(op RemoveOwnership\) IsDestructive\(\) bool](<#RemoveOwnership.IsDestructive>)
  - [func \(op RemoveOwnership\) IsReversible\(\) bool](<#RemoveOwnership.IsReversible>)
  - [func \(op RemoveOwnership\) RollbackTypeQL\(\) string](<#RemoveOwnership.RollbackTypeQL>)
  - [func \(op RemoveOwnership\) ToTypeQL\(\) string](<#RemoveOwnership.ToTypeQL>)
- [type RemoveRelation](<#RemoveRelation>)
  - [func \(op RemoveRelation\) IsDestructive\(\) bool](<#RemoveRelation.IsDestructive>)
  - [func \(op RemoveRelation\) IsReversible\(\) bool](<#RemoveRelation.IsReversible>)
  - [func \(op RemoveRelation\) RollbackTypeQL\(\) string](<#RemoveRelation.RollbackTypeQL>)
  - [func \(op RemoveRelation\) ToTypeQL\(\) string](<#RemoveRelation.ToTypeQL>)
- [type RemoveRole](<#RemoveRole>)
  - [func \(op RemoveRole\) IsDestructive\(\) bool](<#RemoveRole.IsDestructive>)
  - [func \(op RemoveRole\) IsReversible\(\) bool](<#RemoveRole.IsReversible>)
  - [func \(op RemoveRole\) RollbackTypeQL\(\) string](<#RemoveRole.RollbackTypeQL>)
  - [func \(op RemoveRole\) ToTypeQL\(\) string](<#RemoveRole.ToTypeQL>)
- [type ReservedWordError](<#ReservedWordError>)
  - [func \(e \*ReservedWordError\) Error\(\) string](<#ReservedWordError.Error>)
- [type RoleInfo](<#RoleInfo>)
- [type RolePlayerFilter](<#RolePlayerFilter>)
  - [func \(f \*RolePlayerFilter\) ToPatterns\(varName string\) \[\]string](<#RolePlayerFilter.ToPatterns>)
- [type SchemaConflictError](<#SchemaConflictError>)
  - [func \(e \*SchemaConflictError\) Error\(\) string](<#SchemaConflictError.Error>)
- [type SchemaDiff](<#SchemaDiff>)
  - [func DiffSchema\(desired \*tqlgen.ParsedSchema, current \*tqlgen.ParsedSchema\) \*SchemaDiff](<#DiffSchema>)
  - [func DiffSchemaFromRegistry\(currentDB \*tqlgen.ParsedSchema\) \*SchemaDiff](<#DiffSchemaFromRegistry>)
  - [func Migrate\(ctx context.Context, db \*Database\) \(\*SchemaDiff, error\)](<#Migrate>)
  - [func MigrateFromSchema\(ctx context.Context, db \*Database, currentSchemaStr string\) \(\*SchemaDiff, error\)](<#MigrateFromSchema>)
  - [func MigrateWithState\(ctx context.Context, db \*Database\) \(\*SchemaDiff, error\)](<#MigrateWithState>)
  - [func MigrateWithStateFromSchema\(ctx context.Context, db \*Database, currentSchemaStr string\) \(\*SchemaDiff, error\)](<#MigrateWithStateFromSchema>)
  - [func \(d \*SchemaDiff\) BreakingChanges\(\) \[\]BreakingChange](<#SchemaDiff.BreakingChanges>)
  - [func \(d \*SchemaDiff\) DestructiveOperations\(\) \[\]Operation](<#SchemaDiff.DestructiveOperations>)
  - [func \(d \*SchemaDiff\) GenerateMigration\(\) \[\]string](<#SchemaDiff.GenerateMigration>)
  - [func \(d \*SchemaDiff\) GenerateMigrationWithOpts\(opts ...MigrateOption\) \[\]string](<#SchemaDiff.GenerateMigrationWithOpts>)
  - [func \(d \*SchemaDiff\) HasBreakingChanges\(\) bool](<#SchemaDiff.HasBreakingChanges>)
  - [func \(d \*SchemaDiff\) IsEmpty\(\) bool](<#SchemaDiff.IsEmpty>)
  - [func \(d \*SchemaDiff\) Operations\(\) \[\]Operation](<#SchemaDiff.Operations>)
  - [func \(d \*SchemaDiff\) Summary\(\) string](<#SchemaDiff.Summary>)
- [type SchemaValidationError](<#SchemaValidationError>)
  - [func \(e \*SchemaValidationError\) Error\(\) string](<#SchemaValidationError.Error>)
- [type StringFilter](<#StringFilter>)
  - [func \(f \*StringFilter\) ToPatterns\(varName string\) \[\]string](<#StringFilter.ToPatterns>)
- [type TransactionContext](<#TransactionContext>)
  - [func \(tc \*TransactionContext\) Close\(\)](<#TransactionContext.Close>)
  - [func \(tc \*TransactionContext\) Commit\(\) error](<#TransactionContext.Commit>)
  - [func \(tc \*TransactionContext\) Rollback\(\) error](<#TransactionContext.Rollback>)
  - [func \(tc \*TransactionContext\) Tx\(\) Tx](<#TransactionContext.Tx>)
- [type TransactionType](<#TransactionType>)
- [type Tx](<#Tx>)
- [type TypeChange](<#TypeChange>)


## Constants

<a name="MaxHydrationDepth"></a>MaxHydrationDepth is the maximum nesting depth for recursive role player hydration. This prevents infinite loops when the database graph contains cycles.

```go
const MaxHydrationDepth = 10
```

## Variables

<a name="ErrPoolClosed"></a>

```go
var (
    // ErrPoolClosed is returned when attempting to get a connection from a closed pool.
    ErrPoolClosed = errors.New("connection pool is closed")
    // ErrPoolTimeout is returned when waiting for a connection times out.
    ErrPoolTimeout = errors.New("timeout waiting for available connection")
)
```

<a name="TypeQLReservedWords"></a>TypeQLReservedWords is the set of TypeQL reserved keywords that cannot be used as type names, attribute names, or role names.

```go
var TypeQLReservedWords = map[string]bool{

    "define": true, "undefine": true, "redefine": true,

    "match": true, "fetch": true, "insert": true, "delete": true, "update": true, "put": true,

    "select": true, "require": true, "sort": true, "limit": true, "offset": true, "reduce": true,

    "with": true,

    "or": true, "not": true, "try": true,

    "entity": true, "relation": true, "attribute": true, "struct": true, "fun": true,

    "sub": true, "relates": true, "plays": true, "value": true, "owns": true, "alias": true,

    "isa": true, "links": true, "has": true, "is": true, "let": true, "contains": true, "like": true,

    "label": true, "iid": true,

    "card": true, "cascade": true, "independent": true, "abstract": true,
    "key": true, "subkey": true, "unique": true, "values": true,
    "range": true, "regex": true, "distinct": true,

    "check": true, "first": true, "count": true, "max": true, "min": true,
    "mean": true, "median": true, "std": true, "sum": true, "list": true,

    "boolean": true, "integer": true, "double": true, "decimal": true,
    "datetime-tz": true, "datetime_tz": true, "datetime": true,
    "date": true, "duration": true, "string": true,

    "round": true, "ceil": true, "floor": true, "abs": true, "length": true,

    "true": true, "false": true,

    "asc": true, "desc": true, "return": true, "of": true,
    "from": true, "in": true, "as": true,
}
```

<a name="ClearRegistry"></a>
## func [ClearRegistry](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/registry.go#L168>)

```go
func ClearRegistry()
```

ClearRegistry resets the global registry, removing all registered models. This is primarily used for testing purposes.

<a name="EnsureDatabase"></a>
## func [EnsureDatabase](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L63>)

```go
func EnsureDatabase(ctx context.Context, conn Conn, name string) (bool, error)
```

EnsureDatabase checks whether a database exists and creates it if not. Returns true if the database was newly created, false if it already existed.

<a name="FormatValue"></a>
## func [FormatValue](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/format.go#L13>)

```go
func FormatValue(value any) string
```

FormatValue converts a Go value into its TypeQL literal string representation. It handles basic types, pointers, and time.Time, ensuring correct escaping for use in TypeQL queries.

This function delegates to ast.FormatGoValue for the actual formatting logic.

<a name="FromDict"></a>
## func [FromDict](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/model.go#L265>)

```go
func FromDict[T any](data map[string]any) (*T, error)
```

FromDict creates a new model instance from a map\[string\]any. Keys are TypeDB attribute names. This is the inverse of ToDict.

<a name="GenerateSchema"></a>
## func [GenerateSchema](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/schema.go#L11>)

```go
func GenerateSchema() string
```

GenerateSchema produces a complete TypeQL \`define\` query string for all models currently registered in the global registry.

<a name="GenerateSchemaFor"></a>
## func [GenerateSchemaFor](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/schema.go#L49>)

```go
func GenerateSchemaFor(info *ModelInfo) string
```

GenerateSchemaFor produces a TypeQL \`define\` query string specifically for the provided ModelInfo, including its required attribute declarations.

<a name="HashStatements"></a>
## func [HashStatements](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_state.go#L131>)

```go
func HashStatements(stmts []string) string
```

HashStatements generates a SHA\-256 hash for a slice of migration statements to uniquely identify a set of schema changes.

<a name="Hydrate"></a>
## func [Hydrate](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/hydrate.go#L16>)

```go
func Hydrate(target any, data map[string]any) error
```

Hydrate populates the fields of a target struct pointer with data from a map of TypeDB attribute names to values. The struct type must be registered.

<a name="HydrateAny"></a>
## func [HydrateAny](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/hydrate.go#L114>)

```go
func HydrateAny(data map[string]any) (any, error)
```

HydrateAny creates and hydrates an instance of the concrete type identified by the "\_type" field in data. This enables true polymorphic hydration where the returned value's concrete type matches the TypeDB type label. Returns the hydrated instance as any \(actual type is a pointer to the concrete struct\).

<a name="HydrateNew"></a>
## func [HydrateNew](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/hydrate.go#L102>)

```go
func HydrateNew[T any](data map[string]any) (*T, error)
```

HydrateNew is a convenience function that creates a new instance of type T, hydrates it with the provided data, and returns a pointer to it.

<a name="IntrospectSchemaFromString"></a>
## func [IntrospectSchemaFromString](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L143>)

```go
func IntrospectSchemaFromString(schemaStr string) (*tqlgen.ParsedSchema, error)
```

IntrospectSchemaFromString parses a TypeQL schema string into a ParsedSchema structure.

<a name="IsReservedWord"></a>
## func [IsReservedWord](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/reserved.go#L48>)

```go
func IsReservedWord(name string) bool
```

IsReservedWord returns true if the given name is a TypeQL reserved keyword. The check is case\-insensitive.

<a name="MigrateFromEmpty"></a>
## func [MigrateFromEmpty](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L305>)

```go
func MigrateFromEmpty(ctx context.Context, db *Database) error
```

MigrateFromEmpty applies the complete schema defined by registered Go models to an empty database.

<a name="MustRegister"></a>
## func [MustRegister](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/registry.go#L98>)

```go
func MustRegister[T any]()
```

MustRegister is a helper that calls Register and panics if an error occurs. It is intended for use during application initialization.

<a name="Register"></a>
## func [Register](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/registry.go#L28>)

```go
func Register[T any]() error
```

Register adds a Go struct type to the global registry as a TypeDB model. The type T must embed either BaseEntity or BaseRelation.

<a name="ToDict"></a>
## func [ToDict](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/model.go#L221>)

```go
func ToDict[T any](instance *T) (map[string]any, error)
```

ToDict converts a registered model instance to a map\[string\]any using TypeDB attribute names as keys. Includes "\_iid" if set.

<a name="ToInsertQuery"></a>
## func [ToInsertQuery](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/model.go#L270>)

```go
func ToInsertQuery[T any](instance *T) (string, error)
```

ToInsertQuery generates a TypeQL insert query string for the given instance.

<a name="ToMatchQuery"></a>
## func [ToMatchQuery](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/model.go#L287>)

```go
func ToMatchQuery[T any](instance *T) (string, error)
```

ToMatchQuery generates a TypeQL match clause for the given instance \(by key fields\).

<a name="AddAttribute"></a>
## type [AddAttribute](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L19-L22>)

AddAttribute represents the creation of a new attribute type in the schema.

```go
type AddAttribute struct {
    Name      string
    ValueType string
}
```

<a name="AddAttribute.IsDestructive"></a>
### func \(AddAttribute\) [IsDestructive](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L28>)

```go
func (op AddAttribute) IsDestructive() bool
```



<a name="AddAttribute.IsReversible"></a>
### func \(AddAttribute\) [IsReversible](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L27>)

```go
func (op AddAttribute) IsReversible() bool
```



<a name="AddAttribute.RollbackTypeQL"></a>
### func \(AddAttribute\) [RollbackTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L29>)

```go
func (op AddAttribute) RollbackTypeQL() string
```



<a name="AddAttribute.ToTypeQL"></a>
### func \(AddAttribute\) [ToTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L24>)

```go
func (op AddAttribute) ToTypeQL() string
```



<a name="AddEntity"></a>
## type [AddEntity](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L34-L39>)

AddEntity represents the creation of a new entity type in the schema.

```go
type AddEntity struct {
    Name     string
    Parent   string
    Abstract bool
    TypeQL   string // The full define statement for the entity.
}
```

<a name="AddEntity.IsDestructive"></a>
### func \(AddEntity\) [IsDestructive](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L55>)

```go
func (op AddEntity) IsDestructive() bool
```



<a name="AddEntity.IsReversible"></a>
### func \(AddEntity\) [IsReversible](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L54>)

```go
func (op AddEntity) IsReversible() bool
```



<a name="AddEntity.RollbackTypeQL"></a>
### func \(AddEntity\) [RollbackTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L56>)

```go
func (op AddEntity) RollbackTypeQL() string
```



<a name="AddEntity.ToTypeQL"></a>
### func \(AddEntity\) [ToTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L41>)

```go
func (op AddEntity) ToTypeQL() string
```



<a name="AddOwnership"></a>
## type [AddOwnership](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L84-L88>)

AddOwnership represents the assignment of an attribute ownership to a type.

```go
type AddOwnership struct {
    Owner     string
    Attribute string
    Annots    string
}
```

<a name="AddOwnership.IsDestructive"></a>
### func \(AddOwnership\) [IsDestructive](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L98>)

```go
func (op AddOwnership) IsDestructive() bool
```



<a name="AddOwnership.IsReversible"></a>
### func \(AddOwnership\) [IsReversible](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L97>)

```go
func (op AddOwnership) IsReversible() bool
```



<a name="AddOwnership.RollbackTypeQL"></a>
### func \(AddOwnership\) [RollbackTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L99>)

```go
func (op AddOwnership) RollbackTypeQL() string
```



<a name="AddOwnership.ToTypeQL"></a>
### func \(AddOwnership\) [ToTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L90>)

```go
func (op AddOwnership) ToTypeQL() string
```



<a name="AddRelation"></a>
## type [AddRelation](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L59-L64>)

AddRelation represents the creation of a new relation type in the schema.

```go
type AddRelation struct {
    Name     string
    Parent   string
    Abstract bool
    TypeQL   string // The full define statement for the relation.
}
```

<a name="AddRelation.IsDestructive"></a>
### func \(AddRelation\) [IsDestructive](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L80>)

```go
func (op AddRelation) IsDestructive() bool
```



<a name="AddRelation.IsReversible"></a>
### func \(AddRelation\) [IsReversible](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L79>)

```go
func (op AddRelation) IsReversible() bool
```



<a name="AddRelation.RollbackTypeQL"></a>
### func \(AddRelation\) [RollbackTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L81>)

```go
func (op AddRelation) RollbackTypeQL() string
```



<a name="AddRelation.ToTypeQL"></a>
### func \(AddRelation\) [ToTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L66>)

```go
func (op AddRelation) ToTypeQL() string
```



<a name="AddRole"></a>
## type [AddRole](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L104-L108>)

AddRole represents the addition of a role to a relation type.

```go
type AddRole struct {
    Relation string
    Role     string
    Card     string
}
```

<a name="AddRole.IsDestructive"></a>
### func \(AddRole\) [IsDestructive](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L118>)

```go
func (op AddRole) IsDestructive() bool
```



<a name="AddRole.IsReversible"></a>
### func \(AddRole\) [IsReversible](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L117>)

```go
func (op AddRole) IsReversible() bool
```



<a name="AddRole.RollbackTypeQL"></a>
### func \(AddRole\) [RollbackTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L119>)

```go
func (op AddRole) RollbackTypeQL() string
```



<a name="AddRole.ToTypeQL"></a>
### func \(AddRole\) [ToTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L110>)

```go
func (op AddRole) ToTypeQL() string
```



<a name="AggregateQuery"></a>
## type [AggregateQuery](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L258-L263>)

AggregateQuery runs a reduce query and returns a single numeric result.

```go
type AggregateQuery[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="AggregateQuery[T].Execute"></a>
### func \(\*AggregateQuery\[T\]\) [Execute](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L301>)

```go
func (aq *AggregateQuery[T]) Execute(ctx context.Context) (float64, error)
```

Execute runs the aggregate query and returns the result as float64.

<a name="AggregateSpec"></a>
## type [AggregateSpec](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L328-L331>)

AggregateSpec describes a single aggregation to compute.

```go
type AggregateSpec struct {
    Attr string
    Fn   string // sum, mean, min, max, std, median, variance, count
}
```

<a name="AndFilter"></a>
## type [AndFilter](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L272-L274>)

AndFilter combines multiple filters with AND \(conjunction\).

```go
type AndFilter struct {
    Filters []Filter
}
```

<a name="AndFilter.ToPatterns"></a>
### func \(\*AndFilter\) [ToPatterns](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L277>)

```go
func (f *AndFilter) ToPatterns(varName string) []string
```

ToPatterns generates TypeQL patterns by concatenating all child filter patterns.

<a name="AttrChange"></a>
## type [AttrChange](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L32-L35>)

AttrChange describes an attribute type to be added to the schema.

```go
type AttrChange struct {
    Name      string
    ValueType string
}
```

<a name="BaseEntity"></a>
## type [BaseEntity](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/entity.go#L26-L28>)

BaseEntity is an embeddable base type for all Go structs mapping to TypeDB entities. It provides the internal state and methods required to satisfy the Entity interface.

Example usage:

```
type Person struct {
    gotype.BaseEntity
    Name  string `typedb:"name,key"`
}
```

```go
type BaseEntity struct {
    // contains filtered or unexported fields
}
```

<a name="BaseEntity.GetIID"></a>
### func \(\*BaseEntity\) [GetIID](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/entity.go#L36>)

```go
func (e *BaseEntity) GetIID() string
```

GetIID returns the TypeDB internal instance ID.

<a name="BaseEntity.SetIID"></a>
### func \(\*BaseEntity\) [SetIID](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/entity.go#L39>)

```go
func (e *BaseEntity) SetIID(iid string)
```

SetIID sets the TypeDB internal instance ID.

<a name="BaseEntity.TypeDBTypeName"></a>
### func \(BaseEntity\) [TypeDBTypeName](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/entity.go#L33>)

```go
func (BaseEntity) TypeDBTypeName() string
```

TypeDBTypeName returns the TypeDB type name for the entity.

<a name="BaseRelation"></a>
## type [BaseRelation](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/relation.go#L27-L29>)

BaseRelation is an embeddable base type for all Go structs mapping to TypeDB relations. It provides the internal state and methods required to satisfy the Relation interface.

Example usage:

```
type Employment struct {
    gotype.BaseRelation
    Employee *Person  `typedb:"role:employee"`
    Employer *Company `typedb:"role:employer"`
}
```

```go
type BaseRelation struct {
    // contains filtered or unexported fields
}
```

<a name="BaseRelation.GetIID"></a>
### func \(\*BaseRelation\) [GetIID](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/relation.go#L37>)

```go
func (r *BaseRelation) GetIID() string
```

GetIID returns the TypeDB internal instance ID.

<a name="BaseRelation.SetIID"></a>
### func \(\*BaseRelation\) [SetIID](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/relation.go#L40>)

```go
func (r *BaseRelation) SetIID(iid string)
```

SetIID sets the TypeDB internal instance ID.

<a name="BaseRelation.TypeDBTypeName"></a>
### func \(BaseRelation\) [TypeDBTypeName](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/relation.go#L34>)

```go
func (BaseRelation) TypeDBTypeName() string
```

TypeDBTypeName returns the TypeDB type name for the relation.

<a name="BreakingChange"></a>
## type [BreakingChange](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L180-L184>)

BreakingChange describes a change that could cause data loss or schema errors.

```go
type BreakingChange struct {
    Type   string // "removal", "type_change", "cardinality_change"
    Entity string // affected type name
    Detail string // human-readable description
}
```

<a name="ComparisonFilter"></a>
## type [ComparisonFilter](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L20-L25>)

ComparisonFilter compares an attribute to a value using a TypeQL operator.

```go
type ComparisonFilter struct {
    Attr    string
    Op      string
    Value   any
    Negated bool
}
```

<a name="ComparisonFilter.ToPatterns"></a>
### func \(\*ComparisonFilter\) [ToPatterns](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L28>)

```go
func (f *ComparisonFilter) ToPatterns(varName string) []string
```

ToPatterns generates TypeQL patterns for a comparison filter.

<a name="Conn"></a>
## type [Conn](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L42-L59>)

Conn is the interface for a TypeDB connection.

```go
type Conn interface {
    // Transaction opens a new transaction on the specified database.
    Transaction(dbName string, txType int) (Tx, error)
    // Schema returns the current TypeQL schema definition for the named database.
    Schema(dbName string) (string, error)
    // DatabaseCreate creates a new database with the given name.
    DatabaseCreate(name string) error
    // DatabaseDelete permanently removes the named database.
    DatabaseDelete(name string) error
    // DatabaseContains returns true if the named database exists.
    DatabaseContains(name string) (bool, error)
    // DatabaseAll returns the names of all databases on the server.
    DatabaseAll() ([]string, error)
    // Close terminates the connection.
    Close()
    // IsOpen returns true if the connection is active.
    IsOpen() bool
}
```

<a name="ConnPool"></a>
## type [ConnPool](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/pool.go#L34-L46>)

ConnPool manages a pool of database connections for concurrent access.

```go
type ConnPool struct {
    // contains filtered or unexported fields
}
```

<a name="NewConnPool"></a>
### func [NewConnPool](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/pool.go#L64>)

```go
func NewConnPool(config PoolConfig, factory func() (Conn, error)) (*ConnPool, error)
```

NewConnPool creates a new connection pool with the given configuration and factory function. The factory function is called to create new connections when needed. If config.MinSize \> 0, the pool will be pre\-warmed with MinSize connections.

<a name="ConnPool.Close"></a>
### func \(\*ConnPool\) [Close](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/pool.go#L221>)

```go
func (p *ConnPool) Close()
```

Close closes all connections in the pool and prevents new connections from being acquired.

<a name="ConnPool.Get"></a>
### func \(\*ConnPool\) [Get](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/pool.go#L103>)

```go
func (p *ConnPool) Get(ctx context.Context) (Conn, error)
```

Get acquires a connection from the pool. If no connections are available and the pool is at max capacity, it waits for one to become available. Returns ErrPoolClosed if the pool is closed, or ErrPoolTimeout if WaitTimeout is exceeded.

<a name="ConnPool.Put"></a>
### func \(\*ConnPool\) [Put](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/pool.go#L183>)

```go
func (p *ConnPool) Put(conn Conn)
```

Put returns a connection to the pool. If the connection is no longer open, it is discarded instead of being returned to the pool.

<a name="ConnPool.Stats"></a>
### func \(\*ConnPool\) [Stats](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/pool.go#L255>)

```go
func (p *ConnPool) Stats() PoolStats
```

Stats returns current pool statistics.

<a name="Database"></a>
## type [Database](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L82-L86>)

Database represents a high\-level handle to a specific TypeDB database, providing convenient methods for transaction management and query execution.

```go
type Database struct {
    // contains filtered or unexported fields
}
```

<a name="NewDatabase"></a>
### func [NewDatabase](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L89>)

```go
func NewDatabase(conn Conn, dbName string) *Database
```

NewDatabase creates a new Database handle bound to a specific database name.

<a name="NewDatabaseWithPool"></a>
### func [NewDatabaseWithPool](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/pool.go#L313>)

```go
func NewDatabaseWithPool(config PoolConfig, dbName string, factory func() (Conn, error)) (*Database, error)
```

NewDatabaseWithPool creates a Database that uses a connection pool for concurrent access. The pool is created with the given configuration and pre\-warmed with MinSize connections. The Database takes ownership of the pool and will close it when Database.Close\(\) is called.

<a name="Database.Begin"></a>
### func \(\*Database\) [Begin](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L169>)

```go
func (db *Database) Begin(txType TransactionType) (*TransactionContext, error)
```

Begin starts a new TransactionContext. The caller must call Close\(\) when done. A finalizer will log a warning if the transaction is garbage\-collected without being closed.

<a name="Database.Close"></a>
### func \(\*Database\) [Close](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L94>)

```go
func (db *Database) Close()
```

Close closes the underlying connection if it is owned by this Database handle.

<a name="Database.ExecuteRead"></a>
### func \(\*Database\) [ExecuteRead](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L145>)

```go
func (db *Database) ExecuteRead(ctx context.Context, query string) ([]map[string]any, error)
```

ExecuteRead executes a query in a new read transaction.

<a name="Database.ExecuteSchema"></a>
### func \(\*Database\) [ExecuteSchema](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L207>)

```go
func (db *Database) ExecuteSchema(ctx context.Context, query string) error
```

ExecuteSchema executes a schema modification query in a schema transaction.

<a name="Database.ExecuteWrite"></a>
### func \(\*Database\) [ExecuteWrite](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L124>)

```go
func (db *Database) ExecuteWrite(ctx context.Context, query string) ([]map[string]any, error)
```

ExecuteWrite executes a query in a new write transaction and commits it.

<a name="Database.GetConn"></a>
### func \(\*Database\) [GetConn](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L106>)

```go
func (db *Database) GetConn() Conn
```

GetConn returns the underlying Conn implementation.

<a name="Database.Name"></a>
### func \(\*Database\) [Name](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L101>)

```go
func (db *Database) Name() string
```

Name returns the name of the database.

<a name="Database.Schema"></a>
### func \(\*Database\) [Schema](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L111>)

```go
func (db *Database) Schema(ctx context.Context) (string, error)
```

Schema returns the current TypeQL schema definition for this database.

<a name="Database.Transaction"></a>
### func \(\*Database\) [Transaction](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L119>)

```go
func (db *Database) Transaction(txType TransactionType) (Tx, error)
```

Transaction opens a new transaction of the specified type.

<a name="DeleteOption"></a>
## type [DeleteOption](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L255>)

DeleteOption configures delete behavior.

```go
type DeleteOption func(*deleteConfig)
```

<a name="WithStrict"></a>
### func [WithStrict](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L262>)

```go
func WithStrict() DeleteOption
```

WithStrict enables strict mode: delete returns an error if the instance doesn't exist.

<a name="Entity"></a>
## type [Entity](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/entity.go#L7-L15>)

Entity is the marker interface for TypeDB entity types. Structs that represent TypeDB entities must satisfy this interface, typically by embedding the BaseEntity type.

```go
type Entity interface {

    // TypeDBTypeName returns the TypeDB label for this entity type.
    TypeDBTypeName() string
    // GetIID returns the internal TypeDB instance ID (IID) for the entity instance.
    GetIID() string
    // SetIID assigns the internal TypeDB instance ID (IID) to the entity instance.
    SetIID(iid string)
    // contains filtered or unexported methods
}
```

<a name="ExistsFilter"></a>
## type [ExistsFilter](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L228-L231>)

ExistsFilter checks whether an attribute exists \(has\) or not.

```go
type ExistsFilter struct {
    Attr    string
    Negated bool
}
```

<a name="ExistsFilter.ToPatterns"></a>
### func \(\*ExistsFilter\) [ToPatterns](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L234>)

```go
func (f *ExistsFilter) ToPatterns(varName string) []string
```

ToPatterns generates TypeQL patterns for an existence filter.

<a name="FieldInfo"></a>
## type [FieldInfo](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/model.go#L23-L40>)

FieldInfo contains metadata about a single field in a model struct, mapping it to a TypeDB attribute.

```go
type FieldInfo struct {
    // Tag is the parsed 'typedb' struct tag.
    Tag FieldTag
    // FieldName is the name of the field in the Go struct.
    FieldName string
    // FieldIndex is the 0-based index of the field in the Go struct.
    FieldIndex int
    // FieldType is the reflection type of the field.
    FieldType reflect.Type
    // IsPointer is true if the field is a pointer, used for optional attributes.
    IsPointer bool
    // IsSlice is true if the field is a slice, used for multi-valued attributes.
    IsSlice bool
    // ElemType is the base element type for slices and pointers.
    ElemType reflect.Type
    // ValueType is the TypeDB value type (e.g., "string", "long", "boolean").
    ValueType string
}
```

<a name="FieldTag"></a>
## type [FieldTag](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/tags.go#L11-L30>)

FieldTag contains the structured representation of a parsed \`typedb\` struct tag.

```go
type FieldTag struct {
    // Name is the TypeDB attribute name.
    Name string
    // Key specifies if the attribute is a primary key (@key).
    Key bool
    // Unique specifies if the attribute value must be unique (@unique).
    Unique bool
    // CardMin is the minimum cardinality constraint.
    CardMin *int
    // CardMax is the maximum cardinality constraint.
    CardMax *int
    // RoleName is the name of the role for relation player fields.
    RoleName string
    // Abstract marks the model type as abstract.
    Abstract bool
    // TypeName provides an explicit override for the TypeDB type name.
    TypeName string
    // Skip indicates the field should be ignored by the ORM.
    Skip bool
}
```

<a name="ParseTag"></a>
### func [ParseTag](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/tags.go#L40>)

```go
func ParseTag(tag string) (FieldTag, error)
```

ParseTag parses the content of a \`typedb\` struct tag into a FieldTag structure. It supports options like key, unique, cardinality \(card=M..N\), roles \(role:name\), and type name overrides \(type:name\).

<a name="FieldTag.IsRole"></a>
### func \(FieldTag\) [IsRole](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/tags.go#L33>)

```go
func (ft FieldTag) IsRole() bool
```

IsRole returns true if the tag identifies the field as a role player in a relation.

<a name="Filter"></a>
## type [Filter](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L11-L15>)

Filter represents a query filter expression that generates TypeQL patterns. Filters compose via And, Or, and Not to build complex match clauses.

```go
type Filter interface {
    // ToPatterns generates TypeQL pattern strings for this filter.
    // varName is the entity/relation variable name (e.g., "e").
    ToPatterns(varName string) []string
}
```

<a name="And"></a>
### func [And](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L286>)

```go
func And(filters ...Filter) Filter
```

And combines filters with logical AND.

<a name="ByIID"></a>
### func [ByIID](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L265>)

```go
func ByIID(iid string) Filter
```

ByIID creates a filter matching a specific internal ID.

<a name="Contains"></a>
### func [Contains](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L105>)

```go
func Contains(attr string, pattern string) Filter
```

Contains creates a string contains filter.

<a name="Eq"></a>
### func [Eq](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L52>)

```go
func Eq(attr string, value any) Filter
```

Eq creates an equality filter: attribute == value.

<a name="Gt"></a>
### func [Gt](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L62>)

```go
func Gt(attr string, value any) Filter
```

Gt creates a greater\-than filter: attribute \> value.

<a name="Gte"></a>
### func [Gte](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L67>)

```go
func Gte(attr string, value any) Filter
```

Gte creates a greater\-or\-equal filter: attribute \>= value.

<a name="HasAttr"></a>
### func [HasAttr](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L243>)

```go
func HasAttr(attr string) Filter
```

HasAttr creates an attribute existence filter.

<a name="In"></a>
### func [In](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L152>)

```go
func In(attr string, values []any) Filter
```

In creates a filter that checks if an attribute value is in a set.

<a name="Like"></a>
### func [Like](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L110>)

```go
func Like(attr string, pattern string) Filter
```

Like creates a string like filter \(TypeQL pattern matching\).

<a name="Lt"></a>
### func [Lt](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L72>)

```go
func Lt(attr string, value any) Filter
```

Lt creates a less\-than filter: attribute \< value.

<a name="Lte"></a>
### func [Lte](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L77>)

```go
func Lte(attr string, value any) Filter
```

Lte creates a less\-or\-equal filter: attribute \<= value.

<a name="Neq"></a>
### func [Neq](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L57>)

```go
func Neq(attr string, value any) Filter
```

Neq creates a not\-equal filter: attribute \!= value.

<a name="Not"></a>
### func [Not](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L360>)

```go
func Not(filter Filter) Filter
```

Not negates a filter.

<a name="NotHasAttr"></a>
### func [NotHasAttr](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L248>)

```go
func NotHasAttr(attr string) Filter
```

NotHasAttr creates a negated attribute existence filter.

<a name="NotIn"></a>
### func [NotIn](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L157>)

```go
func NotIn(attr string, values []any) Filter
```

NotIn creates a filter that checks if an attribute value is NOT in a set.

<a name="Or"></a>
### func [Or](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L323>)

```go
func Or(filters ...Filter) Filter
```

Or combines filters with logical OR.

<a name="Range"></a>
### func [Range](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L186>)

```go
func Range(attr string, min, max any) Filter
```

Range creates a filter that checks if an attribute value is between min and max \(inclusive\).

<a name="Regex"></a>
### func [Regex](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L213>)

```go
func Regex(attr string, pattern string) Filter
```

Regex creates a filter that matches an attribute value against a regex pattern.

<a name="RolePlayer"></a>
### func [RolePlayer](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L388>)

```go
func RolePlayer(roleName string, inner Filter) Filter
```

RolePlayer creates a filter that matches relations where the given role player satisfies the inner filter.

<a name="Startswith"></a>
### func [Startswith](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L221>)

```go
func Startswith(attr string, prefix string) Filter
```

Startswith creates a filter that checks if a string attribute starts with a prefix. This is sugar over Like with a prefix pattern.

<a name="GroupByQuery"></a>
## type [GroupByQuery](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L399-L403>)

GroupByQuery groups results by an attribute and supports aggregate operations.

```go
type GroupByQuery[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="GroupByQuery[T].Aggregate"></a>
### func \(\*GroupByQuery\[T\]\) [Aggregate](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L412>)

```go
func (gq *GroupByQuery[T]) Aggregate(ctx context.Context, specs ...AggregateSpec) (map[string]map[string]float64, error)
```

Aggregate runs aggregations per group and returns results keyed by group value. Returns map\[groupValue\]map\[aggKey\]float64, where aggKey is "fn\_attr".

<a name="HydrationError"></a>
## type [HydrationError](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L33-L37>)

HydrationError is returned when an error occurs while populating a Go struct with data retrieved from TypeDB.

```go
type HydrationError struct {
    TypeName string
    Field    string
    Cause    error
}
```

<a name="HydrationError.Error"></a>
### func \(\*HydrationError\) [Error](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L40>)

```go
func (e *HydrationError) Error() string
```

Error returns the error message for HydrationError.

<a name="HydrationError.Unwrap"></a>
### func \(\*HydrationError\) [Unwrap](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L45>)

```go
func (e *HydrationError) Unwrap() error
```

Unwrap returns the underlying cause of the HydrationError.

<a name="IIDFilter"></a>
## type [IIDFilter](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L255-L257>)

IIDFilter matches by internal ID.

```go
type IIDFilter struct {
    IID string
}
```

<a name="IIDFilter.ToPatterns"></a>
### func \(\*IIDFilter\) [ToPatterns](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L260>)

```go
func (f *IIDFilter) ToPatterns(varName string) []string
```

ToPatterns generates TypeQL patterns for an IID filter.

<a name="InFilter"></a>
## type [InFilter](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L117-L121>)

InFilter checks whether an attribute value is in a set of values.

```go
type InFilter struct {
    Attr    string
    Values  []any
    Negated bool
}
```

<a name="InFilter.ToPatterns"></a>
### func \(\*InFilter\) [ToPatterns](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L124>)

```go
func (f *InFilter) ToPatterns(varName string) []string
```

ToPatterns generates TypeQL patterns for a set membership filter.

<a name="KeyAttributeError"></a>
## type [KeyAttributeError](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L19-L23>)

KeyAttributeError is returned when a mandatory key attribute is missing during an insert or update operation.

```go
type KeyAttributeError struct {
    EntityType string
    FieldName  string
    Operation  string
}
```

<a name="KeyAttributeError.Error"></a>
### func \(\*KeyAttributeError\) [Error](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L26>)

```go
func (e *KeyAttributeError) Error() string
```

Error returns the error message for KeyAttributeError.

<a name="Manager"></a>
## type [Manager](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L13-L18>)

Manager provides high\-level, generic CRUD \(Create, Read, Update, Delete\) operations for a registered TypeDB model type T.

```go
type Manager[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="NewManager"></a>
### func [NewManager](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L22>)

```go
func NewManager[T any](db *Database) *Manager[T]
```

NewManager creates a new Manager for the model type T. T must be a struct that has been registered via Register\[T\]\(\).

<a name="NewManagerWithTx"></a>
### func [NewManagerWithTx](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L43>)

```go
func NewManagerWithTx[T any](tc *TransactionContext) *Manager[T]
```

NewManagerWithTx creates a Manager bound to an existing transaction context. All operations performed by this manager will use the provided transaction.

<a name="Manager[T].All"></a>
### func \(\*Manager\[T\]\) [All](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L119>)

```go
func (m *Manager[T]) All(ctx context.Context) ([]*T, error)
```

All retrieves all instances of the model type T from the database.

<a name="Manager[T].Delete"></a>
### func \(\*Manager\[T\]\) [Delete](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L267>)

```go
func (m *Manager[T]) Delete(ctx context.Context, instance *T, opts ...DeleteOption) error
```

Delete deletes an instance by IID.

<a name="Manager[T].DeleteMany"></a>
### func \(\*Manager\[T\]\) [DeleteMany](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L310>)

```go
func (m *Manager[T]) DeleteMany(ctx context.Context, instances []*T, opts ...DeleteOption) error
```

DeleteMany deletes multiple instances in a single transaction.

<a name="Manager[T].Get"></a>
### func \(\*Manager\[T\]\) [Get](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L105>)

```go
func (m *Manager[T]) Get(ctx context.Context, filters map[string]any) ([]*T, error)
```

Get retrieves instances of T that match the specified attribute filters. filters is a map where keys are TypeDB attribute names and values are the target values.

<a name="Manager[T].GetByIID"></a>
### func \(\*Manager\[T\]\) [GetByIID](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L143>)

```go
func (m *Manager[T]) GetByIID(ctx context.Context, iid string) (*T, error)
```

GetByIID retrieves a single instance of T by its internal instance ID \(IID\). It returns nil if no instance is found with the given IID.

<a name="Manager[T].GetByIIDPolymorphic"></a>
### func \(\*Manager\[T\]\) [GetByIIDPolymorphic](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L558>)

```go
func (m *Manager[T]) GetByIIDPolymorphic(ctx context.Context, iid string) (*T, string, error)
```

GetByIIDPolymorphic fetches a single instance by IID with polymorphic type resolution. It resolves the actual stored type and fetches all of that type's attributes, so subtype\-specific fields are preserved when the concrete type is registered. Returns the instance hydrated as \*T \(base type fields only\), the type label, and an error if any. Use GetByIIDPolymorphicAny for full subtype hydration. Returns nil, "", nil if not found.

<a name="Manager[T].GetByIIDPolymorphicAny"></a>
### func \(\*Manager\[T\]\) [GetByIIDPolymorphicAny](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L618>)

```go
func (m *Manager[T]) GetByIIDPolymorphicAny(ctx context.Context, iid string) (any, string, error)
```

GetByIIDPolymorphicAny fetches a single instance by IID and hydrates it as the actual concrete subtype. Unlike GetByIIDPolymorphic which always returns \*T, this returns any \(the concrete type pointer\) so subtype\-specific fields are preserved. The concrete subtype must be registered via Register\[ConcreteType\]\(\). Returns nil, "", nil if not found.

<a name="Manager[T].GetWithRoles"></a>
### func \(\*Manager\[T\]\) [GetWithRoles](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L125>)

```go
func (m *Manager[T]) GetWithRoles(ctx context.Context, filters map[string]any) ([]*T, error)
```

GetWithRoles retrieves instances of T and populates their role players. This is primarily used for relation models.

<a name="Manager[T].Insert"></a>
### func \(\*Manager\[T\]\) [Insert](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L65>)

```go
func (m *Manager[T]) Insert(ctx context.Context, instance *T) error
```

Insert adds a new instance of T to the database. If T has key fields, the instance's internal IID will be populated upon success.

<a name="Manager[T].InsertMany"></a>
### func \(\*Manager\[T\]\) [InsertMany](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L513>)

```go
func (m *Manager[T]) InsertMany(ctx context.Context, instances []*T) error
```

InsertMany inserts multiple instances in a single transaction.

<a name="Manager[T].Put"></a>
### func \(\*Manager\[T\]\) [Put](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L409>)

```go
func (m *Manager[T]) Put(ctx context.Context, instance *T) error
```

Put upserts an instance \(insert or update\). After a successful put, the instance's IID is populated \(if it has key fields\).

<a name="Manager[T].PutMany"></a>
### func \(\*Manager\[T\]\) [PutMany](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L453>)

```go
func (m *Manager[T]) PutMany(ctx context.Context, instances []*T) error
```

PutMany upserts multiple instances in a single transaction.

<a name="Manager[T].Query"></a>
### func \(\*Manager\[T\]\) [Query](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L476>)

```go
func (m *Manager[T]) Query() *Query[T]
```

Query returns a new chainable query builder for this model.

<a name="Manager[T].Update"></a>
### func \(\*Manager\[T\]\) [Update](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L165>)

```go
func (m *Manager[T]) Update(ctx context.Context, instance *T) error
```

Update modifies an existing instance of T in the database. The instance must have its IID populated \(typically from a prior Get or Insert\).

<a name="Manager[T].UpdateMany"></a>
### func \(\*Manager\[T\]\) [UpdateMany](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/crud.go#L370>)

```go
func (m *Manager[T]) UpdateMany(ctx context.Context, instances []*T) error
```

UpdateMany updates multiple instances in a single transaction.

<a name="MigrateOption"></a>
## type [MigrateOption](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L265>)

MigrateOption configures migration behavior.

```go
type MigrateOption func(*migrateConfig)
```

<a name="WithDestructive"></a>
### func [WithDestructive](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L272>)

```go
func WithDestructive() MigrateOption
```

WithDestructive enables destructive migration \(removals\).

<a name="MigrationError"></a>
## type [MigrationError](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L88-L91>)

MigrationError is returned when an error occurs during the execution of a schema migration.

```go
type MigrationError struct {
    Operation string
    Cause     error
}
```

<a name="MigrationError.Error"></a>
### func \(\*MigrationError\) [Error](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L94>)

```go
func (e *MigrationError) Error() string
```

Error returns the error message for MigrationError.

<a name="MigrationError.Unwrap"></a>
### func \(\*MigrationError\) [Unwrap](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L99>)

```go
func (e *MigrationError) Unwrap() error
```

Unwrap returns the underlying cause of the MigrationError.

<a name="MigrationRecord"></a>
## type [MigrationRecord](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_state.go#L25-L32>)

MigrationRecord represents a single schema migration that has been successfully applied to the database.

```go
type MigrationRecord struct {
    // Hash is the deterministic SHA-256 hash of the migration's TypeQL statements.
    Hash string
    // Summary is a human-readable description of the changes in the migration.
    Summary string
    // AppliedAt is the timestamp when the migration was recorded in the database.
    AppliedAt time.Time
}
```

<a name="MigrationState"></a>
## type [MigrationState](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_state.go#L36-L38>)

MigrationState provides methods for tracking and managing the history of applied migrations within a TypeDB database.

```go
type MigrationState struct {
    // contains filtered or unexported fields
}
```

<a name="NewMigrationState"></a>
### func [NewMigrationState](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_state.go#L41>)

```go
func NewMigrationState(db *Database) *MigrationState
```

NewMigrationState initializes a new MigrationState tracker for the given database.

<a name="MigrationState.Applied"></a>
### func \(\*MigrationState\) [Applied](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_state.go#L53>)

```go
func (ms *MigrationState) Applied(ctx context.Context) ([]MigrationRecord, error)
```

Applied retrieves all migration records stored in the database, ordered by their application timestamp.

<a name="MigrationState.EnsureSchema"></a>
### func \(\*MigrationState\) [EnsureSchema](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_state.go#L47>)

```go
func (ms *MigrationState) EnsureSchema(ctx context.Context) error
```

EnsureSchema creates the internal TypeDB schema required for tracking migrations. This operation is idempotent and safe to call multiple times.

<a name="MigrationState.IsApplied"></a>
### func \(\*MigrationState\) [IsApplied](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_state.go#L98>)

```go
func (ms *MigrationState) IsApplied(ctx context.Context, hash string) (bool, error)
```

IsApplied checks if a migration with the specified hash has already been applied.

<a name="MigrationState.Record"></a>
### func \(\*MigrationState\) [Record](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_state.go#L114>)

```go
func (ms *MigrationState) Record(ctx context.Context, hash, summary string) error
```

Record saves a new migration record to the database after it has been applied.

<a name="ModelInfo"></a>
## type [ModelInfo](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/model.go#L44-L61>)

ModelInfo contains comprehensive metadata about a registered TypeDB model, including its mapping to a Go struct and its TypeDB schema properties.

```go
type ModelInfo struct {
    // GoType is the reflection type of the Go struct representing the model.
    GoType reflect.Type
    // Kind indicates whether this model is an entity or a relation.
    Kind ModelKind
    // TypeName is the name of the type in the TypeDB schema.
    TypeName string
    // IsAbstract is true if the TypeDB type is defined as abstract.
    IsAbstract bool
    // Supertype is the name of the parent type in the TypeDB schema.
    Supertype string
    // Fields is a list of metadata for each attribute field in the model.
    Fields []FieldInfo
    // Roles is a list of metadata for each role player field (only for relations).
    Roles []RoleInfo
    // KeyFields is a subset of Fields containing attributes marked as keys.
    KeyFields []FieldInfo
}
```

<a name="ExtractModelInfo"></a>
### func [ExtractModelInfo](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/model.go#L85>)

```go
func ExtractModelInfo(t reflect.Type) (*ModelInfo, error)
```

ExtractModelInfo analyzes a Go struct type and extracts its TypeDB model metadata. The struct must embed BaseEntity or BaseRelation to be a valid model.

<a name="Lookup"></a>
### func [Lookup](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/registry.go#L105>)

```go
func Lookup(typeName string) (*ModelInfo, bool)
```

Lookup retrieves ModelInfo for a given TypeDB type name.

<a name="LookupByGoName"></a>
### func [LookupByGoName](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/registry.go#L124>)

```go
func LookupByGoName(name string) (*ModelInfo, bool)
```

LookupByGoName retrieves ModelInfo based on the name of the Go struct.

<a name="LookupType"></a>
### func [LookupType](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/registry.go#L113>)

```go
func LookupType(t reflect.Type) (*ModelInfo, bool)
```

LookupType retrieves ModelInfo for a given Go reflect.Type.

<a name="RegisteredTypes"></a>
### func [RegisteredTypes](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/registry.go#L137>)

```go
func RegisteredTypes() []*ModelInfo
```

RegisteredTypes returns a slice containing ModelInfo for all registered types.

<a name="ResolveType"></a>
### func [ResolveType](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/registry.go#L162>)

```go
func ResolveType(typeLabel string) (*ModelInfo, bool)
```

ResolveType maps a TypeDB type label to its registered ModelInfo.

<a name="SubtypesOf"></a>
### func [SubtypesOf](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/registry.go#L149>)

```go
func SubtypesOf(typeName string) []*ModelInfo
```

SubtypesOf returns a slice of registered types that are direct subtypes of the specified parent type.

<a name="ModelInfo.FieldByAttrName"></a>
### func \(\*ModelInfo\) [FieldByAttrName](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/model.go#L74>)

```go
func (m *ModelInfo) FieldByAttrName(attrName string) (FieldInfo, bool)
```

FieldByAttrName retrieves FieldInfo by the TypeDB attribute name.

<a name="ModelInfo.FieldByName"></a>
### func \(\*ModelInfo\) [FieldByName](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/model.go#L64>)

```go
func (m *ModelInfo) FieldByName(name string) (FieldInfo, bool)
```

FieldByName retrieves FieldInfo by the Go struct field name.

<a name="ModelKind"></a>
## type [ModelKind](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/model.go#L12>)

ModelKind specifies whether a registered TypeDB model is an entity or a relation.

```go
type ModelKind int
```

<a name="ModelKindEntity"></a>

```go
const (
    // ModelKindEntity represents a TypeDB entity type.
    ModelKindEntity ModelKind = iota
    // ModelKindRelation represents a TypeDB relation type.
    ModelKindRelation
)
```

<a name="ModelStrategy"></a>
## type [ModelStrategy](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/strategy.go#L14-L33>)

ModelStrategy specifies the interface for building TypeQL queries based on the kind of model \(entity or relation\).

```go
type ModelStrategy interface {
    // BuildInsertQuery generates a TypeQL insert statement for an instance.
    BuildInsertQuery(info *ModelInfo, instance any, varName string) string
    // BuildPutQuery generates a TypeQL put (upsert) statement for an instance.
    BuildPutQuery(info *ModelInfo, instance any, varName string) string
    // BuildMatchByKey generates a match clause based on the model's key attributes.
    BuildMatchByKey(info *ModelInfo, instance any, varName string) string
    // BuildMatchByIID generates a match clause based on the internal instance ID.
    BuildMatchByIID(iid string, varName string) string
    // BuildMatchAll generates a match clause for all instances of the type.
    BuildMatchAll(info *ModelInfo, varName string) string
    // BuildFetchAll generates a fetch clause for all attributes of the type.
    BuildFetchAll(info *ModelInfo, varName string) string
    // BuildMatchAllStrict generates a strict match clause using isa!.
    BuildMatchAllStrict(info *ModelInfo, varName string) string
    // BuildFetchAllWithType generates a fetch clause that includes the type label.
    BuildFetchAllWithType(info *ModelInfo, varName string) string
    // BuildFetchWithRoles generates a fetch clause including role player data for relations.
    BuildFetchWithRoles(info *ModelInfo, varName string) (matchAdditions string, fetchClause string)
}
```

<a name="NotFilter"></a>
## type [NotFilter](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L332-L334>)

NotFilter negates a filter expression.

```go
type NotFilter struct {
    Inner Filter
}
```

<a name="NotFilter.ToPatterns"></a>
### func \(\*NotFilter\) [ToPatterns](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L337>)

```go
func (f *NotFilter) ToPatterns(varName string) []string
```

ToPatterns generates TypeQL patterns wrapped in a not \{\} block.

<a name="NotFoundError"></a>
## type [NotFoundError](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L105-L107>)

NotFoundError is returned when a query expected to return an instance finds no matching results.

```go
type NotFoundError struct {
    TypeName string
}
```

<a name="NotFoundError.Error"></a>
### func \(\*NotFoundError\) [Error](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L110>)

```go
func (e *NotFoundError) Error() string
```

Error returns the error message for NotFoundError.

<a name="NotRegisteredError"></a>
## type [NotRegisteredError](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L8-L10>)

NotRegisteredError is returned when an operation is attempted on a Go type that has not been registered with the ORM.

```go
type NotRegisteredError struct {
    TypeName string
}
```

<a name="NotRegisteredError.Error"></a>
### func \(\*NotRegisteredError\) [Error](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L13>)

```go
func (e *NotRegisteredError) Error() string
```

Error returns the error message for NotRegisteredError.

<a name="NotUniqueError"></a>
## type [NotUniqueError](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L116-L119>)

NotUniqueError is returned when a query expected to return a single unique instance finds multiple matches.

```go
type NotUniqueError struct {
    TypeName string
    Count    int
}
```

<a name="NotUniqueError.Error"></a>
### func \(\*NotUniqueError\) [Error](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L122>)

```go
func (e *NotUniqueError) Error() string
```

Error returns the error message for NotUniqueError.

<a name="Operation"></a>
## type [Operation](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L7-L16>)

Operation defines the interface for a single, atomic schema migration step.

```go
type Operation interface {
    // ToTypeQL returns the TypeQL statement required to perform the operation.
    ToTypeQL() string
    // IsReversible returns true if the operation can be undone without data loss.
    IsReversible() bool
    // RollbackTypeQL returns the TypeQL statement required to undo the operation.
    RollbackTypeQL() string
    // IsDestructive returns true if the operation results in the deletion of schema elements or data.
    IsDestructive() bool
}
```

<a name="OrFilter"></a>
## type [OrFilter](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L300-L302>)

OrFilter combines alternatives with OR \(disjunction\).

```go
type OrFilter struct {
    Filters []Filter
}
```

<a name="OrFilter.ToPatterns"></a>
### func \(\*OrFilter\) [ToPatterns](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L305>)

```go
func (f *OrFilter) ToPatterns(varName string) []string
```

ToPatterns generates TypeQL or\-branch patterns with scoped variables.

<a name="OrderClause"></a>
## type [OrderClause](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L21-L24>)

OrderClause specifies an attribute name and sort direction for query results.

```go
type OrderClause struct {
    Attr string
    Desc bool
}
```

<a name="OwnsChange"></a>
## type [OwnsChange](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L43-L47>)

OwnsChange describes an attribute ownership to be added to a type.

```go
type OwnsChange struct {
    TypeName  string
    Attribute string
    Annots    string // TypeQL annotations like @key or @card.
}
```

<a name="PoolConfig"></a>
## type [PoolConfig](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/pool.go#L12-L21>)

PoolConfig specifies connection pool behavior.

```go
type PoolConfig struct {
    // MinSize is the minimum number of connections to maintain (0 = no minimum).
    MinSize int
    // MaxSize is the maximum number of connections allowed (0 = unlimited).
    MaxSize int
    // IdleTimeout is the duration after which idle connections are closed (0 = never expire).
    IdleTimeout time.Duration
    // WaitTimeout is the maximum time to wait for an available connection (0 = no timeout).
    WaitTimeout time.Duration
}
```

<a name="DefaultPoolConfig"></a>
### func [DefaultPoolConfig](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/pool.go#L24>)

```go
func DefaultPoolConfig() PoolConfig
```

DefaultPoolConfig returns a reasonable default pool configuration.

<a name="PoolStats"></a>
## type [PoolStats](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/pool.go#L268-L273>)

PoolStats provides statistics about the connection pool.

```go
type PoolStats struct {
    Available int // connections available in the pool
    InUse     int // connections currently in use
    Total     int // total open connections
    Waiting   int // goroutines waiting for a connection
}
```

<a name="Query"></a>
## type [Query](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L12-L18>)

Query provides a chainable, type\-safe API for constructing and executing TypeDB queries for a specific model type T.

```go
type Query[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="Query[T].Aggregate"></a>
### func \(\*Query\[T\]\) [Aggregate](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L336>)

```go
func (q *Query[T]) Aggregate(ctx context.Context, specs ...AggregateSpec) (map[string]float64, error)
```

Aggregate runs multiple aggregations in one call and returns named results. Each spec produces a result keyed by "fn\_attr" \(e.g., "sum\_age", "mean\_score"\). All aggregations are computed in a single query using multiple reduce assignments.

<a name="Query[T].All"></a>
### func \(\*Query\[T\]\) [All](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L67>)

```go
func (q *Query[T]) All(ctx context.Context) ([]*T, error)
```

All executes the query and returns all matching instances as a slice of pointers to T.

<a name="Query[T].Avg"></a>
### func \(\*Query\[T\]\) [Avg](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L271>)

```go
func (q *Query[T]) Avg(attr string) *AggregateQuery[T]
```

Avg creates an aggregate query for the mean of an attribute.

<a name="Query[T].Count"></a>
### func \(\*Query\[T\]\) [Count](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L95>)

```go
func (q *Query[T]) Count(ctx context.Context) (int64, error)
```

Count returns the number of instances matching the query filters.

<a name="Query[T].Delete"></a>
### func \(\*Query\[T\]\) [Delete](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L108>)

```go
func (q *Query[T]) Delete(ctx context.Context) (int64, error)
```

Delete removes all instances that match the query filters.

<a name="Query[T].Execute"></a>
### func \(\*Query\[T\]\) [Execute](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L72>)

```go
func (q *Query[T]) Execute(ctx context.Context) ([]*T, error)
```

Execute performs the query against the database and hydrates the results into Go structs.

<a name="Query[T].Exists"></a>
### func \(\*Query\[T\]\) [Exists](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L58>)

```go
func (q *Query[T]) Exists(ctx context.Context) (bool, error)
```

Exists returns true if the query matches at least one instance in the database.

<a name="Query[T].Filter"></a>
### func \(\*Query\[T\]\) [Filter](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L28>)

```go
func (q *Query[T]) Filter(filters ...Filter) *Query[T]
```

Filter adds one or more filtering conditions to the query. Multiple calls to Filter are combined using logical AND.

<a name="Query[T].First"></a>
### func \(\*Query\[T\]\) [First](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L82>)

```go
func (q *Query[T]) First(ctx context.Context) (*T, error)
```

First executes the query with a limit of 1 and returns the first result, or nil if none found.

<a name="Query[T].GroupBy"></a>
### func \(\*Query\[T\]\) [GroupBy](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L406>)

```go
func (q *Query[T]) GroupBy(attr string) *GroupByQuery[T]
```

GroupBy creates a grouped query for computing per\-group aggregates.

<a name="Query[T].Limit"></a>
### func \(\*Query\[T\]\) [Limit](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L46>)

```go
func (q *Query[T]) Limit(n int) *Query[T]
```

Limit restricts the number of results returned by the query.

<a name="Query[T].Max"></a>
### func \(\*Query\[T\]\) [Max](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L281>)

```go
func (q *Query[T]) Max(attr string) *AggregateQuery[T]
```

Max creates an aggregate query for the maximum of an attribute.

<a name="Query[T].Median"></a>
### func \(\*Query\[T\]\) [Median](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L286>)

```go
func (q *Query[T]) Median(attr string) *AggregateQuery[T]
```

Median creates an aggregate query for the median of an attribute.

<a name="Query[T].Min"></a>
### func \(\*Query\[T\]\) [Min](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L276>)

```go
func (q *Query[T]) Min(attr string) *AggregateQuery[T]
```

Min creates an aggregate query for the minimum of an attribute.

<a name="Query[T].Offset"></a>
### func \(\*Query\[T\]\) [Offset](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L52>)

```go
func (q *Query[T]) Offset(n int) *Query[T]
```

Offset skips the first n results returned by the query.

<a name="Query[T].OrderAsc"></a>
### func \(\*Query\[T\]\) [OrderAsc](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L34>)

```go
func (q *Query[T]) OrderAsc(attr string) *Query[T]
```

OrderAsc adds an ascending sort order on the specified attribute.

<a name="Query[T].OrderDesc"></a>
### func \(\*Query\[T\]\) [OrderDesc](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L40>)

```go
func (q *Query[T]) OrderDesc(attr string) *Query[T]
```

OrderDesc adds a descending sort order on the specified attribute.

<a name="Query[T].Std"></a>
### func \(\*Query\[T\]\) [Std](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L291>)

```go
func (q *Query[T]) Std(attr string) *AggregateQuery[T]
```

Std creates an aggregate query for the standard deviation of an attribute.

<a name="Query[T].Sum"></a>
### func \(\*Query\[T\]\) [Sum](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L266>)

```go
func (q *Query[T]) Sum(attr string) *AggregateQuery[T]
```

Sum creates an aggregate query for the sum of an attribute.

<a name="Query[T].Update"></a>
### func \(\*Query\[T\]\) [Update](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L222>)

```go
func (q *Query[T]) Update(ctx context.Context, updates map[string]any) (int64, error)
```

Update performs a bulk attribute update on all matching instances. Keys in the updates map are TypeDB attribute names; values are the new values. Returns the number of instances updated, or \-1 if the count is unknown.

<a name="Query[T].UpdateWith"></a>
### func \(\*Query\[T\]\) [UpdateWith](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L179>)

```go
func (q *Query[T]) UpdateWith(ctx context.Context, fn func(*T)) ([]*T, error)
```

UpdateWith fetches all matching instances, applies fn to each, then updates them all. The fetch and update are performed within a single write transaction for atomicity.

<a name="Query[T].Variance"></a>
### func \(\*Query\[T\]\) [Variance](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/query.go#L296>)

```go
func (q *Query[T]) Variance(attr string) *AggregateQuery[T]
```

Variance creates an aggregate query for the variance of an attribute.

<a name="RangeFilter"></a>
## type [RangeFilter](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L164-L169>)

RangeFilter checks whether an attribute value falls between min and max \(inclusive\).

```go
type RangeFilter struct {
    Attr    string
    Min     any
    Max     any
    Negated bool
}
```

<a name="RangeFilter.ToPatterns"></a>
### func \(\*RangeFilter\) [ToPatterns](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L172>)

```go
func (f *RangeFilter) ToPatterns(varName string) []string
```

ToPatterns generates TypeQL patterns for a range filter.

<a name="RegexFilter"></a>
## type [RegexFilter](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L193-L197>)

RegexFilter applies a regex match on a string attribute using TypeQL "like".

```go
type RegexFilter struct {
    Attr    string
    Pattern string
    Negated bool
}
```

<a name="RegexFilter.ToPatterns"></a>
### func \(\*RegexFilter\) [ToPatterns](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L200>)

```go
func (f *RegexFilter) ToPatterns(varName string) []string
```

ToPatterns generates TypeQL patterns for a regex filter.

<a name="Registry"></a>
## type [Registry](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/registry.go#L20-L24>)

Registry maintains a mapping between Go struct types and TypeDB model metadata. It is used to look up schema information during query generation and hydration.

```go
type Registry struct {
    // contains filtered or unexported fields
}
```

<a name="RelatesChange"></a>
## type [RelatesChange](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L50-L54>)

RelatesChange describes a role to be added to a relation type.

```go
type RelatesChange struct {
    TypeName string
    Role     string
    Card     string
}
```

<a name="Relation"></a>
## type [Relation](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/relation.go#L7-L15>)

Relation is the marker interface for TypeDB relation types. Structs that represent TypeDB relations must satisfy this interface, typically by embedding the BaseRelation type.

```go
type Relation interface {

    // TypeDBTypeName returns the TypeDB label for this relation type.
    TypeDBTypeName() string
    // GetIID returns the internal TypeDB instance ID (IID) for the relation instance.
    GetIID() string
    // SetIID assigns the internal TypeDB instance ID (IID) to the relation instance.
    SetIID(iid string)
    // contains filtered or unexported methods
}
```

<a name="RemoveAttribute"></a>
## type [RemoveAttribute](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L124-L126>)

RemoveAttribute removes an attribute type.

```go
type RemoveAttribute struct {
    Name string
}
```

<a name="RemoveAttribute.IsDestructive"></a>
### func \(RemoveAttribute\) [IsDestructive](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L130>)

```go
func (op RemoveAttribute) IsDestructive() bool
```



<a name="RemoveAttribute.IsReversible"></a>
### func \(RemoveAttribute\) [IsReversible](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L129>)

```go
func (op RemoveAttribute) IsReversible() bool
```



<a name="RemoveAttribute.RollbackTypeQL"></a>
### func \(RemoveAttribute\) [RollbackTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L131>)

```go
func (op RemoveAttribute) RollbackTypeQL() string
```



<a name="RemoveAttribute.ToTypeQL"></a>
### func \(RemoveAttribute\) [ToTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L128>)

```go
func (op RemoveAttribute) ToTypeQL() string
```



<a name="RemoveEntity"></a>
## type [RemoveEntity](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L134-L136>)

RemoveEntity removes an entity type.

```go
type RemoveEntity struct {
    Name string
}
```

<a name="RemoveEntity.IsDestructive"></a>
### func \(RemoveEntity\) [IsDestructive](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L140>)

```go
func (op RemoveEntity) IsDestructive() bool
```



<a name="RemoveEntity.IsReversible"></a>
### func \(RemoveEntity\) [IsReversible](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L139>)

```go
func (op RemoveEntity) IsReversible() bool
```



<a name="RemoveEntity.RollbackTypeQL"></a>
### func \(RemoveEntity\) [RollbackTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L141>)

```go
func (op RemoveEntity) RollbackTypeQL() string
```



<a name="RemoveEntity.ToTypeQL"></a>
### func \(RemoveEntity\) [ToTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L138>)

```go
func (op RemoveEntity) ToTypeQL() string
```



<a name="RemoveOwnership"></a>
## type [RemoveOwnership](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L154-L157>)

RemoveOwnership removes an owns clause from a type.

```go
type RemoveOwnership struct {
    Owner     string
    Attribute string
}
```

<a name="RemoveOwnership.IsDestructive"></a>
### func \(RemoveOwnership\) [IsDestructive](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L163>)

```go
func (op RemoveOwnership) IsDestructive() bool
```



<a name="RemoveOwnership.IsReversible"></a>
### func \(RemoveOwnership\) [IsReversible](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L162>)

```go
func (op RemoveOwnership) IsReversible() bool
```



<a name="RemoveOwnership.RollbackTypeQL"></a>
### func \(RemoveOwnership\) [RollbackTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L164>)

```go
func (op RemoveOwnership) RollbackTypeQL() string
```



<a name="RemoveOwnership.ToTypeQL"></a>
### func \(RemoveOwnership\) [ToTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L159>)

```go
func (op RemoveOwnership) ToTypeQL() string
```



<a name="RemoveRelation"></a>
## type [RemoveRelation](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L144-L146>)

RemoveRelation removes a relation type.

```go
type RemoveRelation struct {
    Name string
}
```

<a name="RemoveRelation.IsDestructive"></a>
### func \(RemoveRelation\) [IsDestructive](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L150>)

```go
func (op RemoveRelation) IsDestructive() bool
```



<a name="RemoveRelation.IsReversible"></a>
### func \(RemoveRelation\) [IsReversible](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L149>)

```go
func (op RemoveRelation) IsReversible() bool
```



<a name="RemoveRelation.RollbackTypeQL"></a>
### func \(RemoveRelation\) [RollbackTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L151>)

```go
func (op RemoveRelation) RollbackTypeQL() string
```



<a name="RemoveRelation.ToTypeQL"></a>
### func \(RemoveRelation\) [ToTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L148>)

```go
func (op RemoveRelation) ToTypeQL() string
```



<a name="RemoveRole"></a>
## type [RemoveRole](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L167-L170>)

RemoveRole removes a relates clause from a relation type.

```go
type RemoveRole struct {
    Relation string
    Role     string
}
```

<a name="RemoveRole.IsDestructive"></a>
### func \(RemoveRole\) [IsDestructive](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L176>)

```go
func (op RemoveRole) IsDestructive() bool
```



<a name="RemoveRole.IsReversible"></a>
### func \(RemoveRole\) [IsReversible](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L175>)

```go
func (op RemoveRole) IsReversible() bool
```



<a name="RemoveRole.RollbackTypeQL"></a>
### func \(RemoveRole\) [RollbackTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L177>)

```go
func (op RemoveRole) RollbackTypeQL() string
```



<a name="RemoveRole.ToTypeQL"></a>
### func \(RemoveRole\) [ToTypeQL](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L172>)

```go
func (op RemoveRole) ToTypeQL() string
```



<a name="ReservedWordError"></a>
## type [ReservedWordError](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L51-L54>)

ReservedWordError is returned when a TypeQL reserved keyword is used as a name for a type, attribute, or role.

```go
type ReservedWordError struct {
    Word    string
    Context string // "attribute", "entity", "relation", "role"
}
```

<a name="ReservedWordError.Error"></a>
### func \(\*ReservedWordError\) [Error](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L57>)

```go
func (e *ReservedWordError) Error() string
```

Error returns the error message for ReservedWordError.

<a name="RoleInfo"></a>
## type [RoleInfo](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/relation.go#L44-L56>)

RoleInfo contains metadata about a role player in a relation model, defining how a struct field maps to a TypeDB role.

```go
type RoleInfo struct {
    // RoleName is the TypeDB name of the role (e.g., "employee").
    RoleName string

    // FieldName is the name of the Go struct field representing the player.
    FieldName string

    // FieldIndex is the 0-based index of the field in the Go struct.
    FieldIndex int

    // PlayerTypeName is the TypeDB type label of the expected role player.
    PlayerTypeName string
}
```

<a name="RolePlayerFilter"></a>
## type [RolePlayerFilter](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L367-L370>)

RolePlayerFilter matches relations where a given role player satisfies the inner filter.

```go
type RolePlayerFilter struct {
    RoleName string
    Inner    Filter
}
```

<a name="RolePlayerFilter.ToPatterns"></a>
### func \(\*RolePlayerFilter\) [ToPatterns](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L373>)

```go
func (f *RolePlayerFilter) ToPatterns(varName string) []string
```

ToPatterns generates TypeQL patterns linking a role player and applying inner filters.

<a name="SchemaConflictError"></a>
## type [SchemaConflictError](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L76-L79>)

SchemaConflictError is returned when a proposed schema migration conflicts with the existing database schema in a non\-recoverable way.

```go
type SchemaConflictError struct {
    TypeName string
    Change   string
}
```

<a name="SchemaConflictError.Error"></a>
### func \(\*SchemaConflictError\) [Error](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L82>)

```go
func (e *SchemaConflictError) Error() string
```

Error returns the error message for SchemaConflictError.

<a name="SchemaDiff"></a>
## type [SchemaDiff](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L14-L29>)

SchemaDiff represents the calculated differences between the schema defined by Go structs and the current schema in the TypeDB database.

```go
type SchemaDiff struct {
    // AddAttributes are new attribute types to be defined.
    AddAttributes []AttrChange
    // AddEntities are new entity types to be defined.
    AddEntities []TypeChange
    // AddRelations are new relation types to be defined.
    AddRelations []TypeChange
    // AddOwns are new attribute ownerships to be added to existing types.
    AddOwns []OwnsChange
    // AddRelates are new role relations to be added to existing relation types.
    AddRelates []RelatesChange
    // RemoveOwns identifies attribute ownerships present in the DB but not in the code.
    RemoveOwns []OwnsChange
    // RemoveTypes identifies types present in the DB but not in the code.
    RemoveTypes []string
}
```

<a name="DiffSchema"></a>
### func [DiffSchema](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L152>)

```go
func DiffSchema(desired *tqlgen.ParsedSchema, current *tqlgen.ParsedSchema) *SchemaDiff
```

DiffSchema compares two parsed schemas and returns a SchemaDiff representing the changes needed to transform the current schema into the desired schema.

<a name="DiffSchemaFromRegistry"></a>
### func [DiffSchemaFromRegistry](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L265>)

```go
func DiffSchemaFromRegistry(currentDB *tqlgen.ParsedSchema) *SchemaDiff
```

DiffSchemaFromRegistry compares the currently registered Go models against the provided database schema.

<a name="Migrate"></a>
### func [Migrate](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L272>)

```go
func Migrate(ctx context.Context, db *Database) (*SchemaDiff, error)
```

Migrate performs a schema migration by fetching the current database schema, comparing it with registered Go models, and applying any necessary additive changes.

<a name="MigrateFromSchema"></a>
### func [MigrateFromSchema](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L282>)

```go
func MigrateFromSchema(ctx context.Context, db *Database, currentSchemaStr string) (*SchemaDiff, error)
```

MigrateFromSchema performs a schema migration using the provided schema string, comparing it with registered Go models, and applying any necessary additive changes.

<a name="MigrateWithState"></a>
### func [MigrateWithState](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_state.go#L143>)

```go
func MigrateWithState(ctx context.Context, db *Database) (*SchemaDiff, error)
```

MigrateWithState performs a migration while tracking progress in the database. It fetches the current schema automatically and ensures that identical migrations are not applied more than once.

<a name="MigrateWithStateFromSchema"></a>
### func [MigrateWithStateFromSchema](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_state.go#L154>)

```go
func MigrateWithStateFromSchema(ctx context.Context, db *Database, currentSchemaStr string) (*SchemaDiff, error)
```

MigrateWithStateFromSchema performs a migration using the provided schema string while tracking progress in the database. It ensures that identical migrations are not applied more than once.

<a name="SchemaDiff.BreakingChanges"></a>
### func \(\*SchemaDiff\) [BreakingChanges](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L187>)

```go
func (d *SchemaDiff) BreakingChanges() []BreakingChange
```

BreakingChanges analyzes the diff for changes that could cause data loss.

<a name="SchemaDiff.DestructiveOperations"></a>
### func \(\*SchemaDiff\) [DestructiveOperations](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L246>)

```go
func (d *SchemaDiff) DestructiveOperations() []Operation
```

DestructiveOperations returns operations that remove schema elements. These are only generated when explicitly requested.

<a name="SchemaDiff.GenerateMigration"></a>
### func \(\*SchemaDiff\) [GenerateMigration](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L104>)

```go
func (d *SchemaDiff) GenerateMigration() []string
```

GenerateMigration produces a slice of TypeQL 'define' statements required to reconcile the database schema with the Go models.

<a name="SchemaDiff.GenerateMigrationWithOpts"></a>
### func \(\*SchemaDiff\) [GenerateMigrationWithOpts](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L278>)

```go
func (d *SchemaDiff) GenerateMigrationWithOpts(opts ...MigrateOption) []string
```

GenerateMigrationWithOpts produces TypeQL statements to apply the diff. With WithDestructive\(\), also generates undefine statements for removals.

<a name="SchemaDiff.HasBreakingChanges"></a>
### func \(\*SchemaDiff\) [HasBreakingChanges](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L210>)

```go
func (d *SchemaDiff) HasBreakingChanges() bool
```

HasBreakingChanges returns true if the diff contains any breaking changes.

<a name="SchemaDiff.IsEmpty"></a>
### func \(\*SchemaDiff\) [IsEmpty](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L92>)

```go
func (d *SchemaDiff) IsEmpty() bool
```

IsEmpty returns true if no schema differences were detected.

<a name="SchemaDiff.Operations"></a>
### func \(\*SchemaDiff\) [Operations](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate_ops.go#L215>)

```go
func (d *SchemaDiff) Operations() []Operation
```

Operations converts the diff into a list of discrete, ordered operations.

<a name="SchemaDiff.Summary"></a>
### func \(\*SchemaDiff\) [Summary](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L57>)

```go
func (d *SchemaDiff) Summary() string
```

Summary returns a human\-readable description of the changes in the diff.

<a name="SchemaValidationError"></a>
## type [SchemaValidationError](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L64-L67>)

SchemaValidationError is returned when the registered Go models do not align with the expected TypeDB schema patterns.

```go
type SchemaValidationError struct {
    TypeName string
    Message  string
}
```

<a name="SchemaValidationError.Error"></a>
### func \(\*SchemaValidationError\) [Error](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/errors.go#L70>)

```go
func (e *SchemaValidationError) Error() string
```

Error returns the error message for SchemaValidationError.

<a name="StringFilter"></a>
## type [StringFilter](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L84-L89>)

StringFilter applies string operations \(contains, like\) on an attribute.

```go
type StringFilter struct {
    Attr    string
    Op      string // "contains" or "like"
    Pattern string
    Negated bool
}
```

<a name="StringFilter.ToPatterns"></a>
### func \(\*StringFilter\) [ToPatterns](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/filter.go#L92>)

```go
func (f *StringFilter) ToPatterns(varName string) []string
```

ToPatterns generates TypeQL patterns for a string filter.

<a name="TransactionContext"></a>
## type [TransactionContext](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L159-L164>)

TransactionContext provides a scoped transaction that can be explicitly managed and shared across multiple Manager operations.

```go
type TransactionContext struct {
    // contains filtered or unexported fields
}
```

<a name="TransactionContext.Close"></a>
### func \(\*TransactionContext\) [Close](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L196>)

```go
func (tc *TransactionContext) Close()
```

Close releases resources associated with the scoped transaction.

<a name="TransactionContext.Commit"></a>
### func \(\*TransactionContext\) [Commit](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L184>)

```go
func (tc *TransactionContext) Commit() error
```

Commit persists changes in the scoped transaction.

<a name="TransactionContext.Rollback"></a>
### func \(\*TransactionContext\) [Rollback](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L190>)

```go
func (tc *TransactionContext) Rollback() error
```

Rollback discards changes in the scoped transaction.

<a name="TransactionContext.Tx"></a>
### func \(\*TransactionContext\) [Tx](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L202>)

```go
func (tc *TransactionContext) Tx() Tx
```

Tx returns the underlying Tx for direct query execution.

<a name="TransactionType"></a>
## type [TransactionType](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L14>)

TransactionType represents the intended mode of operation for a TypeDB transaction.

```go
type TransactionType int
```

<a name="ReadTransaction"></a>

```go
const (
    // ReadTransaction is for data retrieval only.
    ReadTransaction TransactionType = 0
    // WriteTransaction allows for data modification.
    WriteTransaction TransactionType = 1
    // SchemaTransaction is for modifying the database schema.
    SchemaTransaction TransactionType = 2
)
```

<a name="Tx"></a>
## type [Tx](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/session.go#L26-L39>)

Tx is the interface for a TypeDB transaction, allowing for query execution and lifecycle management.

```go
type Tx interface {
    // Query executes a TypeQL query and returns the results.
    Query(query string) ([]map[string]any, error)
    // QueryWithContext executes a TypeQL query with context cancellation support.
    QueryWithContext(ctx context.Context, query string) ([]map[string]any, error)
    // Commit persists changes made in the transaction.
    Commit() error
    // Rollback discards changes made in the transaction.
    Rollback() error
    // Close releases resources associated with the transaction.
    Close()
    // IsOpen returns true if the transaction is active.
    IsOpen() bool
}
```

<a name="TypeChange"></a>
## type [TypeChange](<https://github.com/CaliLuke/go-typeql/blob/main/gotype/migrate.go#L38-L40>)

TypeChange describes an entity or relation type to be added to the schema.

```go
type TypeChange struct {
    TypeQL string // The full 'define' statement for the type.
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
