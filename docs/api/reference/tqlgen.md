<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# tqlgen

```go
import "github.com/CaliLuke/go-typeql/tqlgen"
```

Package tqlgen provides tools for parsing TypeQL schemas and generating Go code from them.

Package tqlgen provides utilities for transforming TypeDB names into Go\-idiomatic names.

Package tqlgen provides code generation from TypeQL schemas.

## Index

- [Variables](<#variables>)
- [func ExtractAnnotations\(input string\) map\[string\]map\[string\]string](<#ExtractAnnotations>)
- [func Render\(w io.Writer, schema \*ParsedSchema, cfg RenderConfig\) error](<#Render>)
- [func RenderDTO\(w io.Writer, data \*DTOData\) error](<#RenderDTO>)
- [func RenderLeafConstants\(w io.Writer, schema \*ParsedSchema, cfg LeafConstantsConfig\) error](<#RenderLeafConstants>)
- [func RenderRegistry\(w io.Writer, data \*RegistryData\) error](<#RenderRegistry>)
- [func ToPascalCase\(name string\) string](<#ToPascalCase>)
- [func ToPascalCaseAcronyms\(name string\) string](<#ToPascalCaseAcronyms>)
- [func ToSnakeCase\(name string\) string](<#ToSnakeCase>)
- [type Annotation](<#Annotation>)
- [type AsClause](<#AsClause>)
- [type AttrDef](<#AttrDef>)
- [type AttributeSpec](<#AttributeSpec>)
- [type BaseStructConfig](<#BaseStructConfig>)
- [type CardAnnot](<#CardAnnot>)
- [type CompositeEntityConfig](<#CompositeEntityConfig>)
- [type DTOConfig](<#DTOConfig>)
- [type DTOData](<#DTOData>)
  - [func BuildDTOData\(schema \*ParsedSchema, cfg DTOConfig\) \*DTOData](<#BuildDTOData>)
- [type EntityClause](<#EntityClause>)
- [type EntityDef](<#EntityDef>)
- [type EntityFieldOverride](<#EntityFieldOverride>)
- [type EntitySpec](<#EntitySpec>)
- [type EnumCtx](<#EnumCtx>)
- [type EnumValueCtx](<#EnumValueCtx>)
- [type FunBodyTok](<#FunBodyTok>)
- [type FunDef](<#FunDef>)
- [type FunctionSpec](<#FunctionSpec>)
- [type JSONSchemaCtx](<#JSONSchemaCtx>)
- [type JSONSchemaPropCtx](<#JSONSchemaPropCtx>)
- [type KVCtx](<#KVCtx>)
- [type KVMapCtx](<#KVMapCtx>)
- [type KVSliceCtx](<#KVSliceCtx>)
- [type LeafConstantsConfig](<#LeafConstantsConfig>)
- [type OwnsDef](<#OwnsDef>)
- [type OwnsSpec](<#OwnsSpec>)
- [type ParameterSpec](<#ParameterSpec>)
- [type ParsedSchema](<#ParsedSchema>)
  - [func ParseSchema\(input string\) \(\*ParsedSchema, error\)](<#ParseSchema>)
  - [func ParseSchemaFile\(path string\) \(\*ParsedSchema, error\)](<#ParseSchemaFile>)
  - [func \(s \*ParsedSchema\) AccumulateInheritance\(\)](<#ParsedSchema.AccumulateInheritance>)
- [type PlaysDef](<#PlaysDef>)
- [type PlaysSpec](<#PlaysSpec>)
- [type RangeAnnot](<#RangeAnnot>)
- [type RegexAnnot](<#RegexAnnot>)
- [type RegistryConfig](<#RegistryConfig>)
- [type RegistryData](<#RegistryData>)
  - [func BuildRegistryData\(schema \*ParsedSchema, cfg RegistryConfig\) \*RegistryData](<#BuildRegistryData>)
- [type RelSchemaCtx](<#RelSchemaCtx>)
- [type RelatesDef](<#RelatesDef>)
- [type RelatesSpec](<#RelatesSpec>)
- [type RelationClause](<#RelationClause>)
- [type RelationDef](<#RelationDef>)
- [type RelationSpec](<#RelationSpec>)
- [type RenderConfig](<#RenderConfig>)
  - [func DefaultConfig\(\) RenderConfig](<#DefaultConfig>)
- [type RoleCtx](<#RoleCtx>)
- [type SimpleDef](<#SimpleDef>)
- [type StructDefP](<#StructDefP>)
- [type StructFieldP](<#StructFieldP>)
- [type StructFieldSpec](<#StructFieldSpec>)
- [type StructSpec](<#StructSpec>)
- [type SubClause](<#SubClause>)
- [type TQLFileSimple](<#TQLFileSimple>)
- [type TypeConstCtx](<#TypeConstCtx>)
- [type ValuesAnnot](<#ValuesAnnot>)


## Variables

<a name="CommonAcronyms"></a>CommonAcronyms defines a set of common abbreviations that should be fully uppercased when generating Go names.

```go
var CommonAcronyms = map[string]string{
    "id":   "ID",
    "url":  "URL",
    "uuid": "UUID",
    "api":  "API",
    "http": "HTTP",
    "iid":  "IID",
    "nf":   "NF",
}
```

<a name="ExtractAnnotations"></a>
## func [ExtractAnnotations](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L435>)

```go
func ExtractAnnotations(input string) map[string]map[string]string
```

ExtractAnnotations parses comment annotations of the form "\# @key value" from schema text. Returns a map of type name \-\> annotation map.

<a name="Render"></a>
## func [Render](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/render.go#L39>)

```go
func Render(w io.Writer, schema *ParsedSchema, cfg RenderConfig) error
```

Render processes a ParsedSchema and writes the generated Go source code to the provided writer.

<a name="RenderDTO"></a>
## func [RenderDTO](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/dto.go#L376>)

```go
func RenderDTO(w io.Writer, data *DTOData) error
```

RenderDTO writes a DTO Go file from DTOData.

<a name="RenderLeafConstants"></a>
## func [RenderLeafConstants](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L537>)

```go
func RenderLeafConstants(w io.Writer, schema *ParsedSchema, cfg LeafConstantsConfig) error
```

RenderLeafConstants writes a standalone leaf package containing only type, relation, and enum constants. This package has zero internal dependencies, making it safe to import from any package.

<a name="RenderRegistry"></a>
## func [RenderRegistry](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L520>)

```go
func RenderRegistry(w io.Writer, data *RegistryData) error
```

RenderRegistry writes a complete schema registry Go file from RegistryData.

<a name="ToPascalCase"></a>
## func [ToPascalCase](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/naming.go#L17>)

```go
func ToPascalCase(name string) string
```

ToPascalCase transforms a kebab\-case or snake\_case string into PascalCase.

<a name="ToPascalCaseAcronyms"></a>
## func [ToPascalCaseAcronyms](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/naming.go#L54>)

```go
func ToPascalCaseAcronyms(name string) string
```

ToPascalCaseAcronyms transforms a string into PascalCase while preserving the casing of common Go acronyms.

<a name="ToSnakeCase"></a>
## func [ToSnakeCase](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/naming.go#L36>)

```go
func ToSnakeCase(name string) string
```

ToSnakeCase transforms a kebab\-case string into snake\_case.

<a name="Annotation"></a>
## type [Annotation](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L86-L93>)

Annotation parses: @key, @unique, @abstract, @card\(...\), @regex\(...\), @values\(...\), @range\(...\)

```go
type Annotation struct {
    Key    bool         `parser:"  @'@key'"`
    Unique bool         `parser:"| @'@unique'"`
    Card   *CardAnnot   `parser:"| @@"`
    Regex  *RegexAnnot  `parser:"| @@"`
    Values *ValuesAnnot `parser:"| @@"`
    Range  *RangeAnnot  `parser:"| @@"`
}
```

<a name="AsClause"></a>
## type [AsClause](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L81-L83>)

AsClause parses: as parent\-role

```go
type AsClause struct {
    Parent string `parser:"'as' @Ident"`
}
```

<a name="AttrDef"></a>
## type [AttrDef](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L18-L23>)

AttrDef parses: attribute name \[,\] value type \[@constraint\(...\)\];

```go
type AttrDef struct {
    Name      string       `parser:"'attribute' @Ident ','?"`
    ValueType string       `parser:"'value' @Ident"`
    Annots    []Annotation `parser:"@@*"`
    Semi      string       `parser:"';'"`
}
```

<a name="AttributeSpec"></a>
## type [AttributeSpec](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/model.go#L56-L68>)

AttributeSpec describes a TypeQL attribute definition.

```go
type AttributeSpec struct {
    // Name is the name of the attribute type.
    Name string
    // ValueType is the base value type of the attribute (string, integer, double, boolean, datetime).
    ValueType string

    // Regex is an optional regular expression constraint for the attribute values.
    Regex string
    // Values is an optional list of allowed values (enumeration constraint).
    Values []string
    // RangeOp is an optional range constraint (e.g., "1..5").
    RangeOp string
}
```

<a name="BaseStructConfig"></a>
## type [BaseStructConfig](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/dto_config.go#L46-L56>)

BaseStructConfig configures a shared embedded base struct for an entity hierarchy. When an entity inherits from SourceEntity, its DTOs embed the base struct instead of repeating the inherited fields.

```go
type BaseStructConfig struct {
    // SourceEntity is the schema entity name that triggers this base struct.
    SourceEntity string
    // BaseName is the Go struct name prefix (e.g., "BaseArtifact").
    BaseName string
    // InheritedAttrs lists attribute names defined in the base struct.
    // These are skipped when rendering child entity DTOs.
    InheritedAttrs []string
    // ExtraFields adds additional fields as name → Go type annotation.
    ExtraFields map[string]string
}
```

<a name="CardAnnot"></a>
## type [CardAnnot](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L96-L98>)

CardAnnot parses: @card\(expr\)

```go
type CardAnnot struct {
    Expr string `parser:"'@card' '(' @CardExpr ')'"`
}
```

<a name="CompositeEntityConfig"></a>
## type [CompositeEntityConfig](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/dto_config.go#L60-L67>)

CompositeEntityConfig merges multiple entity subtypes into a single flat DTO with a Type discriminator. Useful for polymorphic API endpoints.

```go
type CompositeEntityConfig struct {
    // Name is the Go struct name for the composite DTO (e.g., "ArtifactDTO").
    Name string
    // Entities lists the TypeDB entity names to merge.
    Entities []string
    // TypeName is the TypeDB type name for TypeName() method (e.g., "artifact").
    TypeName string
}
```

<a name="DTOConfig"></a>
## type [DTOConfig](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/dto_config.go#L5-L41>)

DTOConfig configures DTO \(Data Transfer Object\) code generation. DTOs generate Out/Create/Patch struct variants for HTTP API layers.

```go
type DTOConfig struct {
    // PackageName is the Go package name for the generated file (required).
    PackageName string
    // UseAcronyms applies Go acronym naming conventions (e.g., "ID" not "Id").
    UseAcronyms bool
    // SkipAbstract excludes abstract types from DTO generation.
    SkipAbstract bool
    // IDFieldName is the name of the ID field in Out structs (default "ID").
    IDFieldName string
    // StrictOut makes required fields non-pointer in Out structs.
    // When false (default), all attribute fields in Out are pointers for safety.
    StrictOut bool
    // ExcludeEntities lists entity names to skip during generation.
    ExcludeEntities []string
    // ExcludeRelations lists relation names to skip during generation.
    ExcludeRelations []string
    // SkipRelationOut skips generating Out structs for relations.
    SkipRelationOut bool
    // BaseStructs configures shared base structs for entity hierarchies.
    BaseStructs []BaseStructConfig
    // EntityFieldOverrides provides per-entity, per-variant field overrides.
    EntityFieldOverrides []EntityFieldOverride
    // CompositeEntities configures merged flat structs from multiple entity types.
    CompositeEntities []CompositeEntityConfig
    // EntityOutName overrides the interface name for entity Out DTOs (default "EntityOut").
    EntityOutName string
    // EntityCreateName overrides the interface name for entity Create DTOs (default "EntityCreate").
    EntityCreateName string
    // EntityPatchName overrides the interface name for entity Patch DTOs (default "EntityPatch").
    EntityPatchName string
    // RelationOutName overrides the interface name for relation Out DTOs (default "RelationOut").
    RelationOutName string
    // RelationCreateName overrides the interface name for relation Create DTOs (default "RelationCreate").
    RelationCreateName string
    // RelationCreateEmbed is a struct name to embed in all relation Create DTOs.
    RelationCreateEmbed string
}
```

<a name="DTOData"></a>
## type [DTOData](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/dto.go#L12-L41>)

DTOData holds all schema\-derived data for DTO code generation.

```go
type DTOData struct {
    PackageName string
    NeedsTime   bool
    IDFieldName string

    // Base structs (from BaseStructConfig)
    BaseStructs []baseStructDTOCtx

    // Entity DTOs
    Entities []entityDTOCtx

    // Relation DTOs
    Relations           []relationDTOCtx
    SkipRelationOut     bool
    RelationCreateEmbed string

    // Composite entity DTOs
    Composites []compositeDTOCtx

    // Union interface lists (concrete types only)
    ConcreteEntities  []string // Go type names
    ConcreteRelations []string

    // Configurable interface names
    EntityOutName      string
    EntityCreateName   string
    EntityPatchName    string
    RelationOutName    string
    RelationCreateName string
}
```

<a name="BuildDTOData"></a>
### func [BuildDTOData](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/dto.go#L94>)

```go
func BuildDTOData(schema *ParsedSchema, cfg DTOConfig) *DTOData
```

BuildDTOData populates DTOData from a parsed schema. The schema should have AccumulateInheritance\(\) called before this.

<a name="EntityClause"></a>
## type [EntityClause](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L40-L43>)

EntityClause is one of: owns or plays.

```go
type EntityClause struct {
    Owns  *OwnsDef  `parser:"  @@"`
    Plays *PlaysDef `parser:"| @@"`
}
```

<a name="EntityDef"></a>
## type [EntityDef](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L26-L32>)

EntityDef parses: entity name \[sub parent\] \[@abstract\] \[, clause...\];

```go
type EntityDef struct {
    Name     string         `parser:"'entity' @Ident"`
    Parent   *SubClause     `parser:"@@?"`
    Abstract bool           `parser:"@'@abstract'?"`
    Comma    string         `parser:"','?"`
    Clauses  []EntityClause `parser:"( @@ ( ',' @@ )* )? ';'"`
}
```

<a name="EntityFieldOverride"></a>
## type [EntityFieldOverride](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/dto_config.go#L70-L80>)

EntityFieldOverride provides per\-entity, per\-variant field overrides.

```go
type EntityFieldOverride struct {
    // Entity is the TypeDB entity name.
    Entity string
    // Field is the TypeDB attribute name.
    Field string
    // Variant is the DTO variant: "out", "create", or "patch".
    Variant string
    // Required overrides whether the field is required (non-pointer).
    // nil means keep the schema default.
    Required *bool
}
```

<a name="EntitySpec"></a>
## type [EntitySpec](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/model.go#L71-L83>)

EntitySpec describes a TypeQL entity definition.

```go
type EntitySpec struct {
    // Name is the name of the entity type.
    Name string
    // Parent is the name of the parent entity type if this is a subtype.
    Parent string
    // Abstract indicates whether the entity type is defined as abstract.
    Abstract bool

    // Owns is a list of attributes owned by this entity type.
    Owns []OwnsSpec
    // Plays is a list of relation roles this entity type can play.
    Plays []PlaysSpec
}
```

<a name="EnumCtx"></a>
## type [EnumCtx](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L82>)

EnumCtx holds enum constants derived from @values constraints.

```go
type EnumCtx = enumCtx
```

<a name="EnumValueCtx"></a>
## type [EnumValueCtx](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L85>)

EnumValueCtx holds a single enum constant.

```go
type EnumValueCtx = enumValueCtx
```

<a name="FunBodyTok"></a>
## type [FunBodyTok](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L190-L192>)

FunBodyTok matches every token type EXCEPT FunKW. When the parser hits the next \`fun\`, it exits the current FunDef and starts a new one.

```go
type FunBodyTok struct {
    Tok string `parser:"@(Ident | Keyword | Punct | String | CardExpr | AnnotKW | Var | Arrow | Operator)"`
}
```

<a name="FunDef"></a>
## type [FunDef](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L183-L186>)

FunDef parses: fun name \<body tokens until next fun or EOF\> The body is captured as a flat list of tokens for signature extraction.

```go
type FunDef struct {
    Name string       `parser:"FunKW @Ident"`
    Body []FunBodyTok `parser:"@@*"`
}
```

<a name="FunctionSpec"></a>
## type [FunctionSpec](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/model.go#L20-L27>)

FunctionSpec describes the signature of a TypeQL function definition.

```go
type FunctionSpec struct {
    // Name is the name of the function.
    Name string
    // Parameters is a list of parameters accepted by the function.
    Parameters []ParameterSpec
    // ReturnType is the TypeQL return type of the function.
    ReturnType string
}
```

<a name="JSONSchemaCtx"></a>
## type [JSONSchemaCtx](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L117-L121>)

JSONSchemaCtx holds a JSON schema fragment for a single type.

```go
type JSONSchemaCtx struct {
    TypeName   string
    Properties []JSONSchemaPropCtx
    Required   []string
}
```

<a name="JSONSchemaPropCtx"></a>
## type [JSONSchemaPropCtx](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L124-L127>)

JSONSchemaPropCtx describes a single property in a JSON schema fragment.

```go
type JSONSchemaPropCtx struct {
    Name     string
    JSONType string
}
```

<a name="KVCtx"></a>
## type [KVCtx](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L88-L90>)

KVCtx is a simple key\-value pair.

```go
type KVCtx struct {
    Key, Value string
}
```

<a name="KVMapCtx"></a>
## type [KVMapCtx](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L111-L114>)

KVMapCtx is a key with a map of string key\-value pairs \(for annotations\).

```go
type KVMapCtx struct {
    Key    string
    Values []KVCtx
}
```

<a name="KVSliceCtx"></a>
## type [KVSliceCtx](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L93-L96>)

KVSliceCtx is a key with multiple string values.

```go
type KVSliceCtx struct {
    Key    string
    Values []string
}
```

<a name="LeafConstantsConfig"></a>
## type [LeafConstantsConfig](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L525-L532>)

LeafConstantsConfig configures leaf constants package generation.

```go
type LeafConstantsConfig struct {
    // PackageName for the generated file (e.g. "schema").
    PackageName string
    // UseAcronyms applies Go acronym naming conventions.
    UseAcronyms bool
    // SkipAbstract excludes abstract types.
    SkipAbstract bool
}
```

<a name="OwnsDef"></a>
## type [OwnsDef](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L46-L49>)

OwnsDef parses: owns attr\-name \[@key\] \[@unique\] \[@card\(...\)\]

```go
type OwnsDef struct {
    Attribute string       `parser:"'owns' @Ident"`
    Annots    []Annotation `parser:"@@*"`
}
```

<a name="OwnsSpec"></a>
## type [OwnsSpec](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/model.go#L103-L112>)

OwnsSpec describes an "owns attribute" clause in an entity or relation definition.

```go
type OwnsSpec struct {
    // Attribute is the name of the attribute type being owned.
    Attribute string
    // Key indicates whether this attribute is a key for the owner.
    Key bool
    // Unique indicates whether the attribute value must be unique across all instances.
    Unique bool
    // Card specifies the cardinality of the ownership (e.g., "0..1", "1..5").
    Card string
}
```

<a name="ParameterSpec"></a>
## type [ParameterSpec](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/model.go#L30-L35>)

ParameterSpec describes a single parameter of a TypeQL function.

```go
type ParameterSpec struct {
    // Name is the name of the parameter (without the '$' prefix).
    Name string
    // TypeName is the TypeQL type name expected for this parameter.
    TypeName string
}
```

<a name="ParsedSchema"></a>
## type [ParsedSchema](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/model.go#L6-L17>)

ParsedSchema holds all components extracted from a TypeQL schema file, including attribute, entity, and relation definitions, as well as functions and structs.

```go
type ParsedSchema struct {
    // Attributes is a list of all attribute definitions in the schema.
    Attributes []AttributeSpec
    // Entities is a list of all entity definitions in the schema.
    Entities []EntitySpec
    // Relations is a list of all relation definitions in the schema.
    Relations []RelationSpec
    // Functions is a list of all function signatures in the schema.
    Functions []FunctionSpec
    // Structs is a list of all struct definitions in the schema.
    Structs []StructSpec
}
```

<a name="ParseSchema"></a>
### func [ParseSchema](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L137>)

```go
func ParseSchema(input string) (*ParsedSchema, error)
```

ParseSchema parses a TypeQL schema string into a ParsedSchema structure. It handles attribute, entity, relation, function, and struct definitions. Function blocks are parsed by the grammar natively — no pre\-processing needed.

<a name="ParseSchemaFile"></a>
### func [ParseSchemaFile](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L156>)

```go
func ParseSchemaFile(path string) (*ParsedSchema, error)
```

ParseSchemaFile reads a TypeQL schema from the specified file path and parses it.

<a name="ParsedSchema.AccumulateInheritance"></a>
### func \(\*ParsedSchema\) [AccumulateInheritance](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/model.go#L134>)

```go
func (s *ParsedSchema) AccumulateInheritance()
```

AccumulateInheritance propagates owns/plays from parent entities/relations to their children, so each child has the complete set of fields.

<a name="PlaysDef"></a>
## type [PlaysDef](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L52-L55>)

PlaysDef parses: plays relation:role

```go
type PlaysDef struct {
    Relation string `parser:"'plays' @Ident"`
    Role     string `parser:"':' @Ident"`
}
```

<a name="PlaysSpec"></a>
## type [PlaysSpec](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/model.go#L115-L120>)

PlaysSpec describes a "plays relation:role" clause.

```go
type PlaysSpec struct {
    // Relation is the name of the relation type.
    Relation string
    // Role is the name of the role played by the owner within that relation.
    Role string
}
```

<a name="RangeAnnot"></a>
## type [RangeAnnot](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L111-L113>)

RangeAnnot parses: @range\(expr\)

```go
type RangeAnnot struct {
    Expr string `parser:"'@range' '(' @CardExpr ')'"`
}
```

<a name="RegexAnnot"></a>
## type [RegexAnnot](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L101-L103>)

RegexAnnot parses: @regex\("pattern"\)

```go
type RegexAnnot struct {
    Pattern string `parser:"'@regex' '(' @String ')'"`
}
```

<a name="RegistryConfig"></a>
## type [RegistryConfig](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L13-L36>)

RegistryConfig specifies settings for generating a schema registry.

```go
type RegistryConfig struct {
    // PackageName is the Go package name for the generated code (required).
    PackageName string
    // UseAcronyms applies Go acronym naming conventions (e.g., "ID" not "Id").
    UseAcronyms bool
    // SkipAbstract excludes abstract types from entity/relation constants and EntityAttributes.
    SkipAbstract bool
    // Enums generates string constants from @values constraints.
    Enums bool
    // TypePrefix is the prefix for entity type constants (default "Type").
    TypePrefix string
    // RelPrefix is the prefix for relation type constants (default "Rel").
    RelPrefix string
    // SchemaText is the raw schema source. If non-empty, a SHA256-based SchemaHash is computed
    // and annotations are extracted from comments.
    SchemaText string
    // SchemaVersion is a user-provided version string emitted as a constant.
    SchemaVersion string
    // TypedConstants generates typed string constants (type EntityType string, etc.)
    // for compile-time safety instead of plain string constants.
    TypedConstants bool
    // JSONSchema generates JSON schema fragment maps for each entity/relation type.
    JSONSchema bool
}
```

<a name="RegistryData"></a>
## type [RegistryData](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L39-L73>)

RegistryData holds all schema\-derived data for registry code generation.

```go
type RegistryData struct {
    PackageName       string
    EntityConstants   []TypeConstCtx
    RelationConstants []TypeConstCtx
    Enums             []EnumCtx
    EntityParents     []KVCtx
    EntityAttributes  []KVSliceCtx
    AttrValueTypes    []KVCtx
    AttrEnumValues    []KVSliceCtx
    RelationSchema    []RelSchemaCtx
    RelationAttrs     []KVSliceCtx
    AllEntityTypes    []string
    AllRelationTypes  []string
    // Metadata fields
    EntityKeys       []KVSliceCtx
    EntityAbstract   []string
    RelationAbstract []string
    RelationParents  []KVCtx
    SchemaHash       string
    SchemaVersion    string
    AttributeTypes   []string

    // Annotations from schema comments (# @key value)
    EntityAnnotations    []KVMapCtx
    AttributeAnnotations []KVMapCtx
    RelationAnnotations  []KVMapCtx

    // Typed constants (StrEnum-style)
    TypedConstants         bool
    AttributeTypeConstants []TypeConstCtx

    // JSON schema fragments
    JSONSchema       bool
    EntityJSONSchema []JSONSchemaCtx
}
```

<a name="BuildRegistryData"></a>
### func [BuildRegistryData](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L131>)

```go
func BuildRegistryData(schema *ParsedSchema, cfg RegistryConfig) *RegistryData
```

BuildRegistryData populates a RegistryData from a parsed schema. The schema should have AccumulateInheritance\(\) called before this.

<a name="RelSchemaCtx"></a>
## type [RelSchemaCtx](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L105-L108>)

RelSchemaCtx describes a relation's role schema with N roles.

```go
type RelSchemaCtx struct {
    Name  string
    Roles []RoleCtx
}
```

<a name="RelatesDef"></a>
## type [RelatesDef](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L74-L78>)

RelatesDef parses: relates role\-name \[as parent\-role\] \[@card\(...\)\]

```go
type RelatesDef struct {
    Role     string       `parser:"'relates' @Ident"`
    AsParent *AsClause    `parser:"@@?"`
    Annots   []Annotation `parser:"@@*"`
}
```

<a name="RelatesSpec"></a>
## type [RelatesSpec](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/model.go#L123-L130>)

RelatesSpec describes a "relates role" clause in a relation definition.

```go
type RelatesSpec struct {
    // Role is the name of the role in the relation.
    Role string
    // AsParent specifies an overridden role from a parent relation type.
    AsParent string
    // Card specifies the cardinality of players allowed for this role.
    Card string
}
```

<a name="RelationClause"></a>
## type [RelationClause](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L67-L71>)

RelationClause is one of: relates, owns, or plays.

```go
type RelationClause struct {
    Relates *RelatesDef `parser:"  @@"`
    Owns    *OwnsDef    `parser:"| @@"`
    Plays   *PlaysDef   `parser:"| @@"`
}
```

<a name="RelationDef"></a>
## type [RelationDef](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L58-L64>)

RelationDef parses: relation name \[sub parent\] \[@abstract\] \[, clause...\];

```go
type RelationDef struct {
    Name     string           `parser:"'relation' @Ident"`
    Parent   *SubClause       `parser:"@@?"`
    Abstract bool             `parser:"@'@abstract'?"`
    Comma    string           `parser:"','?"`
    Clauses  []RelationClause `parser:"( @@ ( ',' @@ )* )? ';'"`
}
```

<a name="RelationSpec"></a>
## type [RelationSpec](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/model.go#L86-L100>)

RelationSpec describes a TypeQL relation definition.

```go
type RelationSpec struct {
    // Name is the name of the relation type.
    Name string
    // Parent is the name of the parent relation type if this is a subtype.
    Parent string
    // Abstract indicates whether the relation type is defined as abstract.
    Abstract bool

    // Relates is a list of roles involved in this relation.
    Relates []RelatesSpec
    // Owns is a list of attributes owned by this relation type.
    Owns []OwnsSpec
    // Plays is a list of relation roles this relation type can play.
    Plays []PlaysSpec
}
```

<a name="RenderConfig"></a>
## type [RenderConfig](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/render.go#L12-L25>)

RenderConfig specifies the settings for generating Go code from a TypeQL schema.

```go
type RenderConfig struct {
    // PackageName is the name of the Go package for the generated code.
    PackageName string
    // ModulePath is the module import path for the 'gotype' package.
    ModulePath string
    // UseAcronyms, if true, applies Go acronym naming conventions (e.g., 'ID' instead of 'Id').
    UseAcronyms bool
    // SkipAbstract, if true, excludes abstract TypeDB types from the generated Go code.
    SkipAbstract bool
    // SchemaVersion is an optional string included in the generated file header.
    SchemaVersion string
    // Enums, if true, generates string constants from @values constraints on attributes.
    Enums bool
}
```

<a name="DefaultConfig"></a>
### func [DefaultConfig](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/render.go#L28>)

```go
func DefaultConfig() RenderConfig
```

DefaultConfig returns a standard RenderConfig with sensible defaults.

<a name="RoleCtx"></a>
## type [RoleCtx](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L99-L102>)

RoleCtx describes a single role in a relation: its name and which entity types can fill it.

```go
type RoleCtx struct {
    RoleName    string
    PlayerTypes []string
}
```

<a name="SimpleDef"></a>
## type [SimpleDef](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L173-L179>)

SimpleDef represents a single top\-level definition within a TypeQL define block.

```go
type SimpleDef struct {
    Attribute *AttrDef     `parser:"  @@"`
    Entity    *EntityDef   `parser:"| @@"`
    Relation  *RelationDef `parser:"| @@"`
    Struct    *StructDefP  `parser:"| @@"`
    Fun       *FunDef      `parser:"| @@"`
}
```

<a name="StructDefP"></a>
## type [StructDefP](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L118-L121>)

StructDefP parses: struct name \(: | ,\) field \[, field\]\* \[,\] ; Supports both official TypeQL syntax \(\`:\` separator, \`name value type\`\) and legacy syntax \(\`,\` separator, \`value name type\`\).

```go
type StructDefP struct {
    Name   string         `parser:"'struct' @Ident (':' | ',')"`
    Fields []StructFieldP `parser:"@@ (',' @@)* ','? ';'"`
}
```

<a name="StructFieldP"></a>
## type [StructFieldP](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L126-L130>)

StructFieldP parses a struct field in either official or legacy order:

- Official: field\-name value type\[?\]
- Legacy: value field\-name type\[?\]

```go
type StructFieldP struct {
    FieldName string `parser:"( @Ident 'value' | 'value' @Ident )"`
    ValueType string `parser:"@Ident"`
    Optional  bool   `parser:"@'?'?"`
}
```

<a name="StructFieldSpec"></a>
## type [StructFieldSpec](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/model.go#L46-L53>)

StructFieldSpec describes a single field within a TypeQL struct.

```go
type StructFieldSpec struct {
    // Name is the name of the field.
    Name string
    // ValueType is the TypeQL type of the field's value.
    ValueType string
    // Optional indicates whether the field is marked as optional in the schema.
    Optional bool
}
```

<a name="StructSpec"></a>
## type [StructSpec](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/model.go#L38-L43>)

StructSpec describes a TypeQL struct definition, which is a collection of named fields.

```go
type StructSpec struct {
    // Name is the name of the struct type.
    Name string
    // Fields is a list of fields defined within the struct.
    Fields []StructFieldSpec
}
```

<a name="SubClause"></a>
## type [SubClause](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L35-L37>)

SubClause parses: sub parent\-name

```go
type SubClause struct {
    Parent string `parser:"'sub' @Ident"`
}
```

<a name="TQLFileSimple"></a>
## type [TQLFileSimple](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L167-L170>)

TQLFileSimple is the top\-level grammar for a TypeQL define block.

```go
type TQLFileSimple struct {
    Define      string      `parser:"'define'"`
    Definitions []SimpleDef `parser:"@@*"`
}
```

<a name="TypeConstCtx"></a>
## type [TypeConstCtx](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/registry.go#L76-L79>)

TypeConstCtx holds a Go constant name and its string value.

```go
type TypeConstCtx struct {
    Name  string // e.g. "TypePersona"
    Value string // e.g. "persona"
}
```

<a name="ValuesAnnot"></a>
## type [ValuesAnnot](<https://github.com/CaliLuke/go-typeql/blob/main/tqlgen/parser.go#L106-L108>)

ValuesAnnot parses: @values\("a", "b", ...\)

```go
type ValuesAnnot struct {
    Values []string `parser:"'@values' '(' @String ( ',' @String )* ')'"`
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
